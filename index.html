<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Ehson - Xayriya Platformasi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
        }
        
        .modal-content {
            transform: scale(0.7);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .modal.show .modal-content {
            transform: scale(1);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1100;
            transform: translateX(400px);
            transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #10b981, #059669);
            border-radius: 9999px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .campaign-card {
            transition: all 0.3s ease;
        }
        
        .campaign-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }
        
        .category-filter {
            transition: all 0.3s ease;
        }
        
        .category-filter.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-2px);
        }
        
        .donation-amount {
            transition: all 0.3s ease;
        }
        
        .donation-amount:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .donation-amount.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-2px);
        }
        
        .payment-method-card {
            transition: all 0.3s ease;
        }
        
        .payment-method-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .payment-method-card.selected {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }
        
        .mobile-menu {
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        
        .mobile-menu.show {
            transform: translateX(0);
        }
        
        .payment-step {
            display: none;
        }
        
        .payment-step.active {
            display: block;
        }
        
        .loading-spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .line-clamp-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="gradient-primary text-white shadow-2xl sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-3">
                    <div class="bg-white bg-opacity-20 p-2 rounded-lg">
                        <i class="fas fa-heart text-2xl"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold">E-Ehson</h1>
                        <p class="text-sm opacity-90">Xayriya Platformasi</p>
                    </div>
                </div>
                
                <!-- Desktop Menu -->
                <div class="hidden md:flex items-center space-x-6">
                    <a href="#campaigns" class="hover:text-blue-200 transition-colors">Kampaniyalar</a>
                    <a href="#applications" class="hover:text-blue-200 transition-colors">Arizalar</a>
                    <a href="#about" class="hover:text-blue-200 transition-colors">Biz haqimizda</a>
                    <a href="#contact" class="hover:text-blue-200 transition-colors">Aloqa</a>
                </div>
                
                <!-- User Menu -->
                <div class="flex items-center space-x-4">
                    <div id="guestMenu" class="flex items-center space-x-3">
                        <button id="loginBtn" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg transition-all">
                            <i class="fas fa-sign-in-alt mr-2"></i>Kirish
                        </button>
                        <button id="signupBtn" class="bg-white text-purple-600 hover:bg-gray-100 px-4 py-2 rounded-lg font-medium transition-all">
                            <i class="fas fa-user-plus mr-2"></i>Ro'yxatdan o'tish
                        </button>
                    </div>
                    
                    <div id="userMenu" class="hidden flex items-center space-x-4">
                        <div class="relative">
                            <button id="profileDropdown" class="flex items-center space-x-2 bg-white bg-opacity-20 px-4 py-2 rounded-lg hover:bg-opacity-30 transition-all">
                                <div class="w-8 h-8 bg-white bg-opacity-30 rounded-full flex items-center justify-center">
                                    <i class="fas fa-user text-sm"></i>
                                </div>
                                <span id="userName">Foydalanuvchi</span>
                                <i class="fas fa-chevron-down text-sm"></i>
                            </button>
                            
                            <div id="dropdownMenu" class="hidden absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-2xl py-2 z-50">
                                <div class="px-4 py-3 border-b border-gray-100">
                                    <p class="font-medium text-gray-800" id="userNameFull">Test Foydalanuvchi</p>
                                    <p class="text-sm text-gray-600" id="userPhone">+998 90 123 45 67</p>
                                </div>
                                <a href="#" id="myProfileLink" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50">
                                    <i class="fas fa-user mr-3 text-blue-500"></i>Mening profilim
                                </a>
                                <a href="#" id="applyCharityLink" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50">
                                    <i class="fas fa-file-alt mr-3 text-orange-500"></i>Xayriya uchun ariza
                                </a>
                                <a href="#" id="adminPanelLink" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50">
                                    <i class="fas fa-cog mr-3 text-purple-500"></i>Admin panel
                                </a>
                                <div class="border-t border-gray-100 mt-2">
                                    <button id="logoutBtn" class="flex items-center w-full px-4 py-3 text-red-600 hover:bg-red-50">
                                        <i class="fas fa-sign-out-alt mr-3"></i>Chiqish
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button id="menuBtn" class="md:hidden">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="mobile-menu fixed top-0 right-0 h-full w-80 bg-white shadow-2xl z-50 md:hidden">
        <div class="p-6">
            <div class="flex justify-between items-center mb-8">
                <h3 class="text-xl font-bold text-gray-800">Menyu</h3>
                <button id="closeMobileMenu" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <a href="#campaigns" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100">
                    <i class="fas fa-bullhorn text-blue-500"></i>
                    <span>Kampaniyalar</span>
                </a>
                <a href="#applications" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100">
                    <i class="fas fa-file-alt text-orange-500"></i>
                    <span>Arizalar</span>
                </a>
                <a href="#about" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100">
                    <i class="fas fa-info-circle text-green-500"></i>
                    <span>Biz haqimizda</span>
                </a>
                <a href="#contact" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100">
                    <i class="fas fa-phone text-purple-500"></i>
                    <span>Aloqa</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4">
            <div class="text-center mb-6">
                <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-sign-in-alt text-blue-600 text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-800">Tizimga Kirish</h3>
                <p class="text-gray-600 mt-2">Telefon raqamingizni kiriting</p>
            </div>
            
            <div id="loginStep1" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Telefon raqam</label>
                    <input type="tel" id="loginPhone" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="+998 90 123 45 67">
                </div>
                
                <button id="sendOtpBtn" class="w-full btn-primary text-white py-3 rounded-xl font-medium">
                    <span class="btn-text">SMS kod yuborish</span>
                    <div class="loading-spinner hidden ml-2"></div>
                </button>
            </div>
            
            <div id="loginStep2" class="hidden space-y-4">
                <div class="text-center mb-4">
                    <p class="text-gray-600">SMS kod yuborildi:</p>
                    <p class="font-bold text-lg" id="sentPhoneNumber"></p>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Tasdiqlash kodi</label>
                    <input type="text" id="otpCode" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-2xl font-bold" placeholder="1234" maxlength="4">
                </div>
                
                <button id="verifyOtpBtn" class="w-full btn-primary text-white py-3 rounded-xl font-medium">
                    Tasdiqlash
                </button>
                
                <button id="resendOtp" class="w-full text-blue-600 hover:text-blue-700 py-2">
                    Kodni qayta yuborish
                </button>
            </div>
            
            <div class="text-center mt-6">
                <button id="closeLoginModal" class="text-gray-500 hover:text-gray-700">Bekor qilish</button>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div id="signupModal" class="modal">
        <div class="modal-content bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4">
            <div class="text-center mb-6">
                <div class="bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-user-plus text-green-600 text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-800">Ro'yxatdan O'tish</h3>
                <p class="text-gray-600 mt-2">Yangi hisob yarating</p>
            </div>
            
            <div class="space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Ism</label>
                        <input type="text" id="signupFirstName" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Ismingiz">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Familiya</label>
                        <input type="text" id="signupLastName" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Familiyangiz">
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Telefon raqam</label>
                    <input type="tel" id="signupPhone" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="+998 90 123 45 67">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email (ixtiyoriy)</label>
                    <input type="email" id="signupEmail" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="email@example.com">
                </div>
                
                <div class="flex items-center">
                    <input type="checkbox" id="agreeTerms" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500">
                    <label for="agreeTerms" class="ml-2 text-sm text-gray-700">
                        Foydalanish shartlariga roziman
                    </label>
                </div>
                
                <button id="createAccountBtn" class="w-full btn-primary text-white py-3 rounded-xl font-medium">
                    Hisob yaratish
                </button>
            </div>
            
            <div class="text-center mt-6">
                <p class="text-gray-600">Hisobingiz bormi? 
                    <button id="switchToLogin" class="text-blue-600 hover:text-blue-700 font-medium">Kirish</button>
                </p>
            </div>
        </div>
    </div>

    <!-- Charity Application Modal -->
    <div id="charityApplicationModal" class="modal">
        <div class="modal-content bg-white rounded-2xl shadow-2xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="text-center mb-6">
                <div class="bg-orange-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-file-alt text-orange-600 text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-800">Xayriya Uchun Ariza</h3>
                <p class="text-gray-600 mt-2">Yordam olish uchun ariza yuboring</p>
            </div>
            
            <form id="charityApplicationForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ariza nomi *</label>
                    <input type="text" id="applicationTitle" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Masalan: Onam uchun operatsiya" required>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Kategoriya *</label>
                    <select id="applicationCategory" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        <option value="">Kategoriyani tanlang</option>
                        <option value="health">Sog'liqni saqlash</option>
                        <option value="education">Ta'lim</option>
                        <option value="children">Bolalar</option>
                        <option value="emergency">Favqulodda vaziyat</option>
                        <option value="family">Oilaviy muammolar</option>
                        <option value="disability">Nogironlik</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Kerakli miqdor (so'm) *</label>
                    <input type="number" id="applicationAmount" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="5000000" min="10000" required>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Batafsil tavsif *</label>
                    <textarea id="applicationDescription" rows="5" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none" placeholder="Vaziyatingizni batafsil yozing..." required></textarea>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Telefon raqam *</label>
                    <input type="tel" id="applicationPhone" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="+998 90 123 45 67" required>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email (ixtiyoriy)</label>
                    <input type="email" id="applicationEmail" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="email@example.com">
                </div>
                
                <div class="bg-blue-50 p-6 rounded-xl">
                    <h4 class="font-bold text-gray-800 mb-4">To'lov Qabul Qilish Ma'lumotlari</h4>
                    <p class="text-sm text-gray-600 mb-4">Xayriya mablag'larini qabul qilish uchun karta yoki hisob raqam ma'lumotlarini kiriting</p>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">To'lov turi *</label>
                            <select id="recipientPaymentType" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="">Turni tanlang</option>
                                <option value="card">Bank kartasi</option>
                                <option value="account">Bank hisobi</option>
                                <option value="payme">Payme</option>
                                <option value="click">Click</option>
                            </select>
                        </div>
                        
                        <div id="recipientCardFields" class="space-y-4 hidden">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Karta turi *</label>
                                <select id="recipientCardType" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Karta turini tanlang</option>
                                    <option value="uzcard">UzCard</option>
                                    <option value="humo">Humo</option>
                                    <option value="visa">Visa</option>
                                    <option value="mastercard">MasterCard</option>
                                    <option value="uzum">Uzum Bank</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Karta raqami *</label>
                                <input type="text" id="recipientCardNumber" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0000 0000 0000 0000" maxlength="19">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Karta egasining ismi *</label>
                                <input type="text" id="recipientCardHolder" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="JOHN DOE">
                            </div>
                        </div>
                        
                        <div id="recipientAccountFields" class="space-y-4 hidden">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Bank nomi *</label>
                                <select id="recipientBankName" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Bankni tanlang</option>
                                    <option value="nbu">O'zbekiston Milliy Banki</option>
                                    <option value="uzpromstroybank">Uzpromstroybank</option>
                                    <option value="ipoteka">Ipoteka Bank</option>
                                    <option value="asaka">Asaka Bank</option>
                                    <option value="tbc">TBC Bank</option>
                                    <option value="kapitalbank">Kapital Bank</option>
                                    <option value="aloqabank">Aloqa Bank</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Hisob raqami *</label>
                                <input type="text" id="recipientAccountNumber" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="20208000000000000000">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Hisob egasining ismi *</label>
                                <input type="text" id="recipientAccountHolder" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="John Doe">
                            </div>
                        </div>
                        
                        <div id="recipientPaymeFields" class="space-y-4 hidden">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Payme telefon raqami *</label>
                                <input type="tel" id="recipientPaymePhone" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="+998 90 123 45 67">
                            </div>
                        </div>
                        
                        <div id="recipientClickFields" class="space-y-4 hidden">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Click telefon raqami *</label>
                                <input type="tel" id="recipientClickPhone" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="+998 90 123 45 67">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex items-start space-x-3">
                    <input type="checkbox" id="agreeApplicationTerms" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 mt-1" required>
                    <label for="agreeApplicationTerms" class="text-sm text-gray-700">
                        Men taqdim etgan ma'lumotlar to'g'ri ekanligini tasdiqlayaman va moderatsiya qoidalariga roziman
                    </label>
                </div>
                
                <div class="flex space-x-4">
                    <button type="submit" id="submitApplicationBtn" class="flex-1 btn-primary text-white py-3 rounded-xl font-medium">
                        <i class="fas fa-paper-plane mr-2"></i>Ariza yuborish
                    </button>
                    <button type="button" id="closeApplicationModal" class="px-6 py-3 border border-gray-300 rounded-xl text-gray-600 hover:bg-gray-50 transition-all">
                        Bekor qilish
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Donation Modal -->
    <div id="donationModal" class="modal">
        <div class="modal-content bg-white rounded-2xl shadow-2xl p-8 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto">
            <!-- Step 1: Amount Selection -->
            <div id="donationStep1" class="payment-step active">
                <div class="text-center mb-6">
                    <div class="bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-heart text-green-600 text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800" id="donationCampaignTitle">Xayriya qilish</h3>
                    <p class="text-gray-600 mt-2">Yaxshilik qiling, dunyoni o'zgartiring</p>
                </div>
                
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">Xayriya miqdori</label>
                        <div class="grid grid-cols-3 gap-3 mb-4">
                            <button type="button" class="donation-amount bg-gray-100 hover:bg-gray-200 text-gray-800 py-3 rounded-lg font-medium transition-all" data-amount="50000">50,000</button>
                            <button type="button" class="donation-amount bg-gray-100 hover:bg-gray-200 text-gray-800 py-3 rounded-lg font-medium transition-all" data-amount="100000">100,000</button>
                            <button type="button" class="donation-amount bg-gray-100 hover:bg-gray-200 text-gray-800 py-3 rounded-lg font-medium transition-all" data-amount="250000">250,000</button>
                            <button type="button" class="donation-amount bg-gray-100 hover:bg-gray-200 text-gray-800 py-3 rounded-lg font-medium transition-all" data-amount="500000">500,000</button>
                            <button type="button" class="donation-amount bg-gray-100 hover:bg-gray-200 text-gray-800 py-3 rounded-lg font-medium transition-all" data-amount="1000000">1,000,000</button>
                            <button type="button" class="donation-amount bg-gray-100 hover:bg-gray-200 text-gray-800 py-3 rounded-lg font-medium transition-all" data-amount="custom">Boshqa</button>
                        </div>
                        <input type="number" id="customDonationAmount" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Miqdorni kiriting" min="10000">
                    </div>
                    
                    <div class="flex space-x-4">
                        <button id="nextToDonationStep2" class="flex-1 btn-primary text-white py-3 rounded-xl font-medium">
                            <i class="fas fa-arrow-right mr-2"></i>Davom etish
                        </button>
                        <button id="closeDonationModal" class="px-6 py-3 border border-gray-300 rounded-xl text-gray-600 hover:bg-gray-50 transition-all">
                            Bekor qilish
                        </button>
                    </div>
                </div>
            </div>

            <!-- Step 2: Payment Method -->
            <div id="donationStep2" class="payment-step">
                <div class="text-center mb-6">
                    <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-credit-card text-blue-600 text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800">To'lov usuli</h3>
                    <p class="text-gray-600 mt-2">Miqdor: <span id="selectedAmountDisplay" class="font-bold text-green-600">0 so'm</span></p>
                </div>
                
                <div class="space-y-4">
                    <div class="payment-method-card border border-gray-300 rounded-xl p-4 cursor-pointer hover:border-blue-500" data-method="card">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                <i class="fas fa-credit-card text-blue-600"></i>
                            </div>
                            <div>
                                <p class="font-medium text-gray-800">Bank kartasi</p>
                                <p class="text-sm text-gray-600">Visa, MasterCard, UzCard, Humo, Uzum</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="payment-method-card border border-gray-300 rounded-xl p-4 cursor-pointer hover:border-blue-500" data-method="payme">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center">
                                <i class="fas fa-mobile-alt text-purple-600"></i>
                            </div>
                            <div>
                                <p class="font-medium text-gray-800">Payme</p>
                                <p class="text-sm text-gray-600">Mobil to'lov tizimi</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="payment-method-card border border-gray-300 rounded-xl p-4 cursor-pointer hover:border-blue-500" data-method="click">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                                <i class="fas fa-mobile-alt text-green-600"></i>
                            </div>
                            <div>
                                <p class="font-medium text-gray-800">Click</p>
                                <p class="text-sm text-gray-600">Mobil to'lov tizimi</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex space-x-4 mt-6">
                    <button id="backToDonationStep1" class="px-6 py-3 border border-gray-300 rounded-xl text-gray-600 hover:bg-gray-50 transition-all">
                        <i class="fas fa-arrow-left mr-2"></i>Orqaga
                    </button>
                    <button id="nextToDonationStep3" class="flex-1 btn-primary text-white py-3 rounded-xl font-medium">
                        <i class="fas fa-arrow-right mr-2"></i>Davom etish
                    </button>
                </div>
            </div>

            <!-- Step 3: Payment Details -->
            <div id="donationStep3" class="payment-step">
                <div class="text-center mb-6">
                    <div class="bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-lock text-purple-600 text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800">To'lov ma'lumotlari</h3>
                    <p class="text-gray-600 mt-2">Miqdor: <span id="finalAmountDisplay" class="font-bold text-green-600">0 so'm</span></p>
                </div>

                <!-- Recipient Card Info -->
                <div id="recipientCardInfo" class="bg-blue-50 p-4 rounded-xl mb-6">
                    <h4 class="font-bold text-gray-800 mb-2">Qabul qiluvchi karta ma'lumotlari:</h4>
                    <div id="recipientCardDetails" class="space-y-2 text-sm">
                        <!-- Will be populated dynamically -->
                    </div>
                </div>

                <!-- Bank Card Payment Form -->
                <div id="cardPaymentForm" class="space-y-4 hidden">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Karta turi</label>
                        <select id="cardType" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Karta turini tanlang</option>
                            <option value="visa">Visa</option>
                            <option value="mastercard">MasterCard</option>
                            <option value="uzcard">UzCard</option>
                            <option value="humo">Humo</option>
                            <option value="uzum">Uzum Bank</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Karta raqami</label>
                        <input type="text" id="cardNumber" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0000 0000 0000 0000" maxlength="19">
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Amal qilish muddati</label>
                            <input type="text" id="cardExpiry" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="MM/YY" maxlength="5">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">CVV</label>
                            <input type="text" id="cardCvv" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="123" maxlength="3">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Karta egasining ismi</label>
                        <input type="text" id="cardHolder" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="JOHN DOE">
                    </div>
                </div>

                <!-- Payme Payment Form -->
                <div id="paymePaymentForm" class="space-y-4 hidden">
                    <div class="bg-purple-50 p-4 rounded-xl">
                        <div class="flex items-center space-x-3 mb-4">
                            <div class="w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-mobile-alt text-white text-xl"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-gray-800">Payme orqali to'lov</h4>
                                <p class="text-sm text-gray-600">Telefon raqamingizni kiriting</p>
                            </div>
                        </div>
                        <input type="tel" id="paymePhone" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="+998 90 123 45 67">
                    </div>
                </div>

                <!-- Click Payment Form -->
                <div id="clickPaymentForm" class="space-y-4 hidden">
                    <div class="bg-green-50 p-4 rounded-xl">
                        <div class="flex items-center space-x-3 mb-4">
                            <div class="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-mobile-alt text-white text-xl"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-gray-800">Click orqali to'lov</h4>
                                <p class="text-sm text-gray-600">Telefon raqamingizni kiriting</p>
                            </div>
                        </div>
                        <input type="tel" id="clickPhone" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="+998 90 123 45 67">
                    </div>
                </div>

                <div class="flex items-center space-x-3 mb-6">
                    <input type="checkbox" id="agreePayment" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500">
                    <label for="agreePayment" class="text-sm text-gray-700">
                        To'lov shartlariga roziman va ma'lumotlarimning xavfsizligini tasdiqlayaman
                    </label>
                </div>
                
                <div class="flex space-x-4">
                    <button id="backToDonationStep2" class="px-6 py-3 border border-gray-300 rounded-xl text-gray-600 hover:bg-gray-50 transition-all">
                        <i class="fas fa-arrow-left mr-2"></i>Orqaga
                    </button>
                    <button id="proceedPaymentBtn" class="flex-1 btn-primary text-white py-3 rounded-xl font-medium">
                        <i class="fas fa-lock mr-2"></i>To'lovni amalga oshirish
                    </button>
                </div>
            </div>

            <!-- Step 4: Payment Processing -->
            <div id="donationStep4" class="payment-step">
                <div class="text-center">
                    <div class="bg-yellow-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <div class="loading-spinner"></div>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">To'lov amalga oshirilmoqda...</h3>
                    <p class="text-gray-600 mb-6">Iltimos, kuting. To'lovingiz qayta ishlanmoqda.</p>
                    
                    <div class="bg-blue-50 p-4 rounded-xl">
                        <p class="text-sm text-blue-800">
                            <i class="fas fa-info-circle mr-2"></i>
                            Sahifani yopmang va qayta yuklamang
                        </p>
                    </div>
                </div>
            </div>

            <!-- Step 5: Payment Success -->
            <div id="donationStep5" class="payment-step">
                <div class="text-center">
                    <div class="bg-green-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-check text-green-600 text-3xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">To'lov muvaffaqiyatli!</h3>
                    <p class="text-gray-600 mb-6">Sizning xayriyangiz uchun rahmat!</p>
                    
                    <div class="bg-gray-50 p-6 rounded-xl mb-6">
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Miqdor:</span>
                                <span class="font-bold text-green-600" id="successAmount">0 so'm</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">To'lov usuli:</span>
                                <span class="font-medium" id="successMethod">-</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Tranzaksiya ID:</span>
                                <span class="font-mono text-sm" id="transactionId">-</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Sana:</span>
                                <span class="text-sm" id="successDate">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <button id="closeDonationSuccess" class="w-full btn-primary text-white py-3 rounded-xl font-medium">
                        <i class="fas fa-home mr-2"></i>Bosh sahifaga qaytish
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel Modal -->
    <div id="adminPanelModal" class="modal">
        <div class="modal-content bg-white rounded-2xl shadow-2xl p-8 max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="text-center mb-6">
                <div class="bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-cog text-purple-600 text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-800">Admin Panel</h3>
                <p class="text-gray-600 mt-2">Platform boshqaruvi</p>
            </div>
            
            <!-- Admin Tabs -->
            <div class="flex flex-wrap border-b border-gray-200 mb-6">
                <button class="admin-tab active px-6 py-3 text-purple-600 border-b-2 border-purple-600 font-medium" data-tab="campaigns">
                    <i class="fas fa-bullhorn mr-2"></i>Kampaniyalar
                </button>
                <button class="admin-tab px-6 py-3 text-gray-600 hover:text-purple-600 font-medium" data-tab="applications">
                    <i class="fas fa-file-alt mr-2"></i>Arizalar
                </button>
                <button class="admin-tab px-6 py-3 text-gray-600 hover:text-purple-600 font-medium" data-tab="users">
                    <i class="fas fa-users mr-2"></i>Foydalanuvchilar
                </button>
                <button class="admin-tab px-6 py-3 text-gray-600 hover:text-purple-600 font-medium" data-tab="payments">
                    <i class="fas fa-credit-card mr-2"></i>To'lovlar
                </button>
                <button class="admin-tab px-6 py-3 text-gray-600 hover:text-purple-600 font-medium" data-tab="admins">
                    <i class="fas fa-user-shield mr-2"></i>Adminlar
                </button>
                <button class="admin-tab px-6 py-3 text-gray-600 hover:text-purple-600 font-medium" data-tab="settings">
                    <i class="fas fa-cogs mr-2"></i>Sozlamalar
                </button>
            </div>
            
            <!-- Campaigns Tab -->
            <div id="adminCampaigns" class="admin-tab-content">
                <div class="flex justify-between items-center mb-6">
                    <h4 class="text-xl font-bold text-gray-800">Kampaniyalar Boshqaruvi</h4>
                    <button id="addCampaignBtn" class="btn-primary text-white px-4 py-2 rounded-lg">
                        <i class="fas fa-plus mr-2"></i>Yangi Kampaniya
                    </button>
                </div>
                <div id="adminCampaignsList" class="space-y-4">
                    <!-- Campaigns will be loaded here -->
                </div>
            </div>
            
            <!-- Applications Tab -->
            <div id="adminApplications" class="admin-tab-content hidden">
                <div class="flex justify-between items-center mb-6">
                    <h4 class="text-xl font-bold text-gray-800">Arizalar Boshqaruvi</h4>
                    <div class="flex space-x-2">
                        <select id="applicationStatusFilter" class="px-3 py-2 border border-gray-300 rounded-lg">
                            <option value="all">Barchasi</option>
                            <option value="pending">Kutilmoqda</option>
                            <option value="approved">Tasdiqlangan</option>
                            <option value="rejected">Rad etilgan</option>
                        </select>
                    </div>
                </div>
                <div id="adminApplicationsList" class="space-y-4">
                    <!-- Applications will be loaded here -->
                </div>
            </div>
            
            <!-- Users Tab -->
            <div id="adminUsers" class="admin-tab-content hidden">
                <div class="flex justify-between items-center mb-6">
                    <h4 class="text-xl font-bold text-gray-800">Foydalanuvchilar</h4>
                    <div class="flex space-x-2">
                        <input type="text" id="userSearchInput" placeholder="Qidirish..." class="px-3 py-2 border border-gray-300 rounded-lg">
                        <button id="searchUsersBtn" class="btn-primary text-white px-4 py-2 rounded-lg">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
                <div id="adminUsersList" class="space-y-4">
                    <!-- Users will be loaded here -->
                </div>
            </div>
            
            <!-- Payments Tab -->
            <div id="adminPayments" class="admin-tab-content hidden">
                <div class="flex justify-between items-center mb-6">
                    <h4 class="text-xl font-bold text-gray-800">To'lovlar Statistikasi</h4>
                    <div class="flex space-x-2">
                        <select id="paymentPeriodFilter" class="px-3 py-2 border border-gray-300 rounded-lg">
                            <option value="today">Bugun</option>
                            <option value="week">Bu hafta</option>
                            <option value="month">Bu oy</option>
                            <option value="year">Bu yil</option>
                        </select>
                    </div>
                </div>
                
                <!-- Payment Stats -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-green-50 p-6 rounded-xl">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-green-600 text-sm font-medium">Jami To'lovlar</p>
                                <p class="text-2xl font-bold text-green-800" id="totalPayments">0 so'm</p>
                            </div>
                            <div class="bg-green-100 p-3 rounded-full">
                                <i class="fas fa-coins text-green-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-blue-50 p-6 rounded-xl">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-blue-600 text-sm font-medium">To'lovlar Soni</p>
                                <p class="text-2xl font-bold text-blue-800" id="paymentsCount">0</p>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-full">
                                <i class="fas fa-credit-card text-blue-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-purple-50 p-6 rounded-xl">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-purple-600 text-sm font-medium">Komissiya</p>
                                <p class="text-2xl font-bold text-purple-800" id="totalCommission">0 so'm</p>
                            </div>
                            <div class="bg-purple-100 p-3 rounded-full">
                                <i class="fas fa-percentage text-purple-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-orange-50 p-6 rounded-xl">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-orange-600 text-sm font-medium">O'rtacha To'lov</p>
                                <p class="text-2xl font-bold text-orange-800" id="averagePayment">0 so'm</p>
                            </div>
                            <div class="bg-orange-100 p-3 rounded-full">
                                <i class="fas fa-chart-line text-orange-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="adminPaymentsList" class="space-y-4">
                    <!-- Payments will be loaded here -->
                </div>
            </div>
            
            <!-- Admins Tab -->
            <div id="adminAdmins" class="admin-tab-content hidden">
                <div class="flex justify-between items-center mb-6">
                    <h4 class="text-xl font-bold text-gray-800">Adminlar va Moderatorlar</h4>
                    <button id="addAdminBtn" class="btn-primary text-white px-4 py-2 rounded-lg">
                        <i class="fas fa-user-plus mr-2"></i>Admin/Moderator Qo'shish
                    </button>
                </div>
                <div id="adminAdminsList" class="space-y-4">
                    <!-- Admins will be loaded here -->
                </div>
            </div>
            
            <!-- Settings Tab -->
            <div id="adminSettings" class="admin-tab-content hidden">
                <h4 class="text-xl font-bold text-gray-800 mb-6">Platform Sozlamalari</h4>
                
                <div class="space-y-6">
                    <div class="bg-gray-50 p-6 rounded-xl">
                        <h5 class="text-lg font-bold text-gray-800 mb-4">To'lov Sozlamalari</h5>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Platform Komissiyasi (%)</label>
                                <select id="platformCommission" class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                                    <option value="0">0% - Komissiyasiz</option>
                                    <option value="2" selected>2% - Standart</option>
                                    <option value="3">3% - Yuqori</option>
                                    <option value="5">5% - Maksimal</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Minimal Xayriya (so'm)</label>
                                <input type="number" id="minDonationAmount" value="10000" class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gray-50 p-6 rounded-xl">
                        <h5 class="text-lg font-bold text-gray-800 mb-4">To'lov Usullari</h5>
                        <div class="space-y-3">
                            <label class="flex items-center space-x-3">
                                <input type="checkbox" id="enableCards" checked class="w-4 h-4 text-blue-600">
                                <span>Bank kartalari (Visa, MasterCard, UzCard)</span>
                            </label>
                            <label class="flex items-center space-x-3">
                                <input type="checkbox" id="enablePayme" checked class="w-4 h-4 text-blue-600">
                                <span>Payme</span>
                            </label>
                            <label class="flex items-center space-x-3">
                                <input type="checkbox" id="enableClick" checked class="w-4 h-4 text-blue-600">
                                <span>Click</span>
                            </label>
                        </div>
                    </div>
                    
                    <button id="saveSettingsBtn" class="btn-primary text-white px-6 py-3 rounded-xl">
                        <i class="fas fa-save mr-2"></i>Sozlamalarni Saqlash
                    </button>
                </div>
            </div>
            
            <div class="text-center mt-8">
                <button id="closeAdminPanel" class="px-6 py-3 border border-gray-300 rounded-xl text-gray-600 hover:bg-gray-50 transition-all">
                    Yopish
                </button>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div id="profileModal" class="modal">
        <div class="modal-content bg-white rounded-2xl shadow-2xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="text-center mb-6">
                <div class="bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-user text-blue-600 text-3xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-800">Mening Profilim</h3>
                <p class="text-gray-600 mt-2">Shaxsiy ma'lumotlar va faoliyat</p>
            </div>
            
            <!-- Profile Tabs -->
            <div class="flex border-b border-gray-200 mb-6">
                <button class="profile-tab active px-6 py-3 text-blue-600 border-b-2 border-blue-600 font-medium" data-tab="info">
                    <i class="fas fa-user mr-2"></i>Ma'lumotlar
                </button>
                <button class="profile-tab px-6 py-3 text-gray-600 hover:text-blue-600 font-medium" data-tab="donations">
                    <i class="fas fa-heart mr-2"></i>Xayriyalarim
                </button>
                <button class="profile-tab px-6 py-3 text-gray-600 hover:text-blue-600 font-medium" data-tab="applications">
                    <i class="fas fa-file-alt mr-2"></i>Arizalarim
                </button>
            </div>
            
            <!-- Profile Info Tab -->
            <div id="profileInfo" class="profile-tab-content">
                <form id="profileForm" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ism</label>
                            <input type="text" id="profileFirstName" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Familiya</label>
                            <input type="text" id="profileLastName" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Telefon raqam</label>
                        <input type="tel" id="profilePhone" class="w-full px-4 py-3 border border-gray-300 rounded-xl bg-gray-100" readonly>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" id="profileEmail" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    
                    <div class="bg-gray-50 p-4 rounded-xl">
                        <h5 class="font-medium text-gray-800 mb-2">Statistika</h5>
                        <div class="grid grid-cols-2 gap-4 text-center">
                            <div>
                                <p class="text-2xl font-bold text-green-600" id="userTotalDonations">0</p>
                                <p class="text-sm text-gray-600">Xayriyalar</p>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-blue-600" id="userTotalAmount">0 so'm</p>
                                <p class="text-sm text-gray-600">Jami miqdor</p>
                            </div>
                        </div>
                    </div>
                    
                    <button type="submit" class="w-full btn-primary text-white py-3 rounded-xl font-medium">
                        <i class="fas fa-save mr-2"></i>Ma'lumotlarni Saqlash
                    </button>
                </form>
            </div>
            
            <!-- Profile Donations Tab -->
            <div id="profileDonations" class="profile-tab-content hidden">
                <h4 class="text-lg font-bold text-gray-800 mb-4">Mening Xayriyalarim</h4>
                <div id="userDonationsList" class="space-y-4">
                    <!-- User donations will be loaded here -->
                </div>
            </div>
            
            <!-- Profile Applications Tab -->
            <div id="profileApplications" class="profile-tab-content hidden">
                <h4 class="text-lg font-bold text-gray-800 mb-4">Mening Arizalarim</h4>
                <div id="userApplicationsList" class="space-y-4">
                    <!-- User applications will be loaded here -->
                </div>
            </div>
            
            <div class="text-center mt-8">
                <button id="closeProfileModal" class="px-6 py-3 border border-gray-300 rounded-xl text-gray-600 hover:bg-gray-50 transition-all">
                    Yopish
                </button>
            </div>
        </div>
    </div>

    <!-- Application Detail Modal -->
    <div id="applicationDetailModal" class="modal">
        <div class="modal-content bg-white rounded-2xl shadow-2xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="text-center mb-6">
                <div class="bg-orange-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-file-alt text-orange-600 text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-800" id="applicationDetailTitle">Ariza Batafsil</h3>
                <p class="text-gray-600 mt-2">To'liq ma'lumotlar</p>
            </div>
            
            <div id="applicationDetailContent" class="space-y-6">
                <!-- Content will be loaded dynamically -->
            </div>
            
            <div class="text-center mt-8">
                <button id="closeApplicationDetail" class="px-6 py-3 border border-gray-300 rounded-xl text-gray-600 hover:bg-gray-50 transition-all">
                    Yopish
                </button>
            </div>
        </div>
    </div>

    <!-- Add Admin Modal -->
    <div id="addAdminModal" class="modal">
        <div class="modal-content bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4">
            <div class="text-center mb-6">
                <div class="bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-user-plus text-purple-600 text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-800">Admin/Moderator Qo'shish</h3>
                <p class="text-gray-600 mt-2">Yangi admin yoki moderator qo'shing</p>
            </div>
            
            <form id="addAdminForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ism Familiya *</label>
                    <input type="text" id="newAdminName" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="To'liq ism" required>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Telefon raqam *</label>
                    <input type="tel" id="newAdminPhone" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="+998 90 123 45 67" required>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
                    <input type="email" id="newAdminEmail" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="email@example.com" required>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Rol *</label>
                    <select id="newAdminRole" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        <option value="">Rolni tanlang</option>
                        <option value="admin">Admin</option>
                        <option value="moderator">Moderator</option>
                    </select>
                </div>
                
                <div class="flex space-x-4">
                    <button type="submit" class="flex-1 btn-primary text-white py-3 rounded-xl font-medium">
                        <i class="fas fa-user-plus mr-2"></i>Qo'shish
                    </button>
                    <button type="button" id="closeAddAdminModal" class="px-6 py-3 border border-gray-300 rounded-xl text-gray-600 hover:bg-gray-50 transition-all">
                        Bekor qilish
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification bg-white rounded-xl shadow-2xl p-6 max-w-sm border-l-4">
        <div class="flex items-start space-x-4">
            <div id="notificationIcon" class="w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0">
                <i class="fas fa-check text-white"></i>
            </div>
            <div class="flex-1">
                <p id="notificationTitle" class="font-bold text-gray-800 text-lg"></p>
                <p id="notificationMessage" class="text-gray-600 mt-1"></p>
            </div>
            <button id="closeNotification" class="text-gray-400 hover:text-gray-600">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div id="mainContent">
        <!-- Hero Section -->
        <section class="gradient-primary text-white py-20 relative overflow-hidden">
            <div class="absolute inset-0 bg-black opacity-10"></div>
            <div class="container mx-auto px-4 text-center relative z-10">
                <h2 class="text-5xl md:text-6xl font-bold mb-6 fade-in">Yaxshilik qiling,<br>Dunyoni o'zgartiring</h2>
                <p class="text-xl md:text-2xl mb-8 opacity-90 max-w-3xl mx-auto fade-in">E-Ehson orqali minglab odamlarga yordam bering va jamiyatda ijobiy o'zgarishlar yarating</p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center fade-in">
                    <button id="startDonatingBtn" class="bg-white text-purple-600 px-8 py-4 rounded-lg font-bold text-lg hover:bg-gray-100 transition-all transform hover:scale-105">
                        <i class="fas fa-heart mr-2"></i>Xayriya qilishni boshlash
                    </button>
                    <button id="applyForCharityBtn" class="border-2 border-white text-white px-8 py-4 rounded-lg font-bold text-lg hover:bg-white hover:text-purple-600 transition-all">
                        <i class="fas fa-file-alt mr-2"></i>Xayriya uchun ariza
                    </button>
                </div>
            </div>
            
            <!-- Floating elements -->
            <div class="absolute top-20 left-10 w-20 h-20 bg-white bg-opacity-10 rounded-full pulse-animation"></div>
            <div class="absolute bottom-20 right-10 w-16 h-16 bg-white bg-opacity-10 rounded-full pulse-animation" style="animation-delay: 1s;"></div>
            <div class="absolute top-1/2 left-1/4 w-12 h-12 bg-white bg-opacity-10 rounded-full pulse-animation" style="animation-delay: 2s;"></div>
        </section>

        <!-- Stats Section -->
        <section class="py-16 bg-white">
            <div class="container mx-auto px-4">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                    <div class="text-center fade-in">
                        <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-bullhorn text-blue-600 text-2xl"></i>
                        </div>
                        <h3 class="text-3xl font-bold text-gray-800" id="totalCampaigns">3</h3>
                        <p class="text-gray-600 mt-2">Faol Kampaniyalar</p>
                    </div>
                    <div class="text-center fade-in">
                        <div class="bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-coins text-green-600 text-2xl"></i>
                        </div>
                        <h3 class="text-3xl font-bold text-gray-800" id="totalRaised">200,000,000 so'm</h3>
                        <p class="text-gray-600 mt-2">Jami Yig'ilgan</p>
                    </div>
                    <div class="text-center fade-in">
                        <div class="bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-users text-purple-600 text-2xl"></i>
                        </div>
                        <h3 class="text-3xl font-bold text-gray-800" id="totalDonors">990</h3>
                        <p class="text-gray-600 mt-2">Xayriyachilar</p>
                    </div>
                    <div class="text-center fade-in">
                        <div class="bg-orange-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-hands-helping text-orange-600 text-2xl"></i>
                        </div>
                        <h3 class="text-3xl font-bold text-gray-800" id="totalHelped">0</h3>
                        <p class="text-gray-600 mt-2">Yordam Olganlar</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Categories Section -->
        <section class="py-16 bg-gray-50">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold text-gray-800 mb-4">Xayriya Kategoriyalari</h2>
                    <p class="text-xl text-gray-600">Turli sohalarda yordam bering</p>
                </div>
                
                <div class="flex flex-wrap justify-center gap-4 mb-8">
                    <button class="category-filter active px-6 py-3 rounded-full bg-white text-gray-700 font-medium shadow-md" data-category="all">
                        Barchasi
                    </button>
                    <button class="category-filter px-6 py-3 rounded-full bg-white text-gray-700 font-medium shadow-md" data-category="health">
                        Sog'liqni saqlash
                    </button>
                    <button class="category-filter px-6 py-3 rounded-full bg-white text-gray-700 font-medium shadow-md" data-category="education">
                        Ta'lim
                    </button>
                    <button class="category-filter px-6 py-3 rounded-full bg-white text-gray-700 font-medium shadow-md" data-category="children">
                        Bolalar
                    </button>
                    <button class="category-filter px-6 py-3 rounded-full bg-white text-gray-700 font-medium shadow-md" data-category="emergency">
                        Favqulodda vaziyat
                    </button>
                    <button class="category-filter px-6 py-3 rounded-full bg-white text-gray-700 font-medium shadow-md" data-category="family">
                        Oilaviy muammolar
                    </button>
                </div>
            </div>
        </section>

        <!-- Campaigns Section -->
        <section id="campaigns" class="py-16 bg-white">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold text-gray-800 mb-4">Faol Kampaniyalar</h2>
                    <p class="text-xl text-gray-600">Yordam kutayotgan odamlarga qo'l uzating</p>
                </div>
                
                <div id="campaignsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Sample Campaign 1 -->
                    <div class="campaign-card bg-white rounded-2xl shadow-lg overflow-hidden">
                        <div class="relative">
                            <div class="w-full h-48 bg-gradient-to-r from-blue-400 to-blue-600 flex items-center justify-center">
                                <div class="text-center text-white">
                                    <i class="fas fa-heartbeat text-4xl mb-2"></i>
                                    <p class="text-lg font-semibold">Yurak Operatsiyasi</p>
                                </div>
                            </div>
                            <div class="absolute top-4 left-4">
                                <span class="bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-medium">Sog'liqni saqlash</span>
                            </div>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold text-gray-800 mb-2 line-clamp-2">7 yoshli Anvar uchun yurak operatsiyasi</h3>
                            <p class="text-gray-600 mb-4 line-clamp-3">Anvar tug'ma yurak kasalligi bilan og'riydi va operatsiya qilish zarur. Oilasi moliyaviy qiyinchilikda.</p>
                            
                            <div class="mb-4">
                                <div class="flex justify-between text-sm text-gray-600 mb-2">
                                    <span>Yig'ilgan: 35,000,000 so'm</span>
                                    <span>Maqsad: 50,000,000 so'm</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="progress-bar h-2 rounded-full" style="width: 70%"></div>
                                </div>
                                <div class="flex justify-between text-sm text-gray-500 mt-2">
                                    <span>234 xayriyachi</span>
                                    <span>15 kun qoldi</span>
                                </div>
                            </div>
                            
                            <div class="flex space-x-3">
                                <button class="flex-1 btn-primary text-white py-2 px-4 rounded-lg font-medium donate-btn" data-campaign-id="1">
                                    <i class="fas fa-heart mr-2"></i>Xayriya qilish
                                </button>
                                <button class="p-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-all like-btn" data-campaign-id="1">
                                    <i class="far fa-heart text-gray-600"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Sample Campaign 2 -->
                    <div class="campaign-card bg-white rounded-2xl shadow-lg overflow-hidden">
                        <div class="relative">
                            <div class="w-full h-48 bg-gradient-to-r from-green-400 to-green-600 flex items-center justify-center">
                                <div class="text-center text-white">
                                    <i class="fas fa-school text-4xl mb-2"></i>
                                    <p class="text-lg font-semibold">Maktab Qurilishi</p>
                                </div>
                            </div>
                            <div class="absolute top-4 left-4">
                                <span class="bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium">Ta'lim</span>
                            </div>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold text-gray-800 mb-2 line-clamp-2">Qashqadaryo viloyatida maktab qurilishi</h3>
                            <p class="text-gray-600 mb-4 line-clamp-3">200 nafar bolaga ta'lim berish uchun yangi maktab qurilishi kerak. Hozirgi maktab juda eski.</p>
                            
                            <div class="mb-4">
                                <div class="flex justify-between text-sm text-gray-600 mb-2">
                                    <span>Yig'ilgan: 120,000,000 so'm</span>
                                    <span>Maqsad: 200,000,000 so'm</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="progress-bar h-2 rounded-full" style="width: 60%"></div>
                                </div>
                                <div class="flex justify-between text-sm text-gray-500 mt-2">
                                    <span>567 xayriyachi</span>
                                    <span>45 kun qoldi</span>
                                </div>
                            </div>
                            
                            <div class="flex space-x-3">
                                <button class="flex-1 btn-primary text-white py-2 px-4 rounded-lg font-medium donate-btn" data-campaign-id="2">
                                    <i class="fas fa-heart mr-2"></i>Xayriya qilish
                                </button>
                                <button class="p-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-all like-btn" data-campaign-id="2">
                                    <i class="far fa-heart text-gray-600"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Sample Campaign 3 -->
                    <div class="campaign-card bg-white rounded-2xl shadow-lg overflow-hidden">
                        <div class="relative">
                            <div class="w-full h-48 bg-gradient-to-r from-purple-400 to-purple-600 flex items-center justify-center">
                                <div class="text-center text-white">
                                    <i class="fas fa-home text-4xl mb-2"></i>
                                    <p class="text-lg font-semibold">Oila Uchun Uy</p>
                                </div>
                            </div>
                            <div class="absolute top-4 left-4">
                                <span class="bg-purple-500 text-white px-3 py-1 rounded-full text-sm font-medium">Oilaviy muammolar</span>
                            </div>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold text-gray-800 mb-2 line-clamp-2">5 bolali oila uchun uy qurilishi</h3>
                            <p class="text-gray-600 mb-4 line-clamp-3">Katta oila ijaraga pul topa olmaydi va o'z uyiga muhtoj. Bolalar sog'lom muhitda o'sishi kerak.</p>
                            
                            <div class="mb-4">
                                <div class="flex justify-between text-sm text-gray-600 mb-2">
                                    <span>Yig'ilgan: 45,000,000 so'm</span>
                                    <span>Maqsad: 80,000,000 so'm</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="progress-bar h-2 rounded-full" style="width: 56%"></div>
                                </div>
                                <div class="flex justify-between text-sm text-gray-500 mt-2">
                                    <span>189 xayriyachi</span>
                                    <span>30 kun qoldi</span>
                                </div>
                            </div>
                            
                            <div class="flex space-x-3">
                                <button class="flex-1 btn-primary text-white py-2 px-4 rounded-lg font-medium donate-btn" data-campaign-id="3">
                                    <i class="fas fa-heart mr-2"></i>Xayriya qilish
                                </button>
                                <button class="p-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-all like-btn" data-campaign-id="3">
                                    <i class="far fa-heart text-gray-600"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="text-center mt-12">
                    <button id="loadMoreCampaigns" class="bg-gray-200 text-gray-700 px-8 py-3 rounded-lg font-medium hover:bg-gray-300 transition-all">
                        Ko'proq yuklash
                    </button>
                </div>
            </div>
        </section>

        <!-- Applications Section -->
        <section id="applications" class="py-16 bg-gray-50">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold text-gray-800 mb-4">Yordam So'ralgan Arizalar</h2>
                    <p class="text-xl text-gray-600">Muhtoj oilalarga yordam bering</p>
                </div>
                
                <div id="applicationsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Sample Application 1 -->
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden border-l-4 border-red-500">
                        <div class="relative">
                            <div class="w-full h-48 bg-gradient-to-r from-red-400 to-red-600 flex items-center justify-center">
                                <div class="text-center text-white">
                                    <i class="fas fa-user-md text-4xl mb-2"></i>
                                    <p class="text-lg font-semibold">Operatsiya Kerak</p>
                                </div>
                            </div>
                            <div class="absolute top-4 left-4">
                                <span class="bg-red-500 text-white px-3 py-1 rounded-full text-sm font-medium">Sog'liqni saqlash</span>
                            </div>
                            <div class="absolute top-4 right-4">
                                <span class="bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium">Tasdiqlangan</span>
                            </div>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Onaning operatsiyasi uchun yordam</h3>
                            <p class="text-gray-600 mb-4 line-clamp-3">Onamning jiddiy operatsiyasi kerak, moliyaviy imkoniyat yo'q. Shifokorlar operatsiyani kechiktirish mumkin emasligini aytishdi.</p>
                            
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Kerakli miqdor:</span>
                                    <span class="font-bold text-red-600">25,000,000 so'm</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Ariza beruvchi:</span>
                                    <span class="font-medium">Dilshod Rahimov</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Sana:</span>
                                    <span class="text-sm">5-fevral, 2024</span>
                                </div>
                            </div>
                            
                            <button class="w-full btn-primary text-white py-2 px-4 rounded-lg font-medium view-application-btn" data-application-id="1">
                                <i class="fas fa-eye mr-2"></i>Batafsil ko'rish
                            </button>
                        </div>
                    </div>

                    <!-- Sample Application 2 -->
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden border-l-4 border-yellow-500">
                        <div class="relative">
                            <div class="w-full h-48 bg-gradient-to-r from-yellow-400 to-yellow-600 flex items-center justify-center">
                                <div class="text-center text-white">
                                    <i class="fas fa-child text-4xl mb-2"></i>
                                    <p class="text-lg font-semibold">Bolalar Bog'chasi</p>
                                </div>
                            </div>
                            <div class="absolute top-4 left-4">
                                <span class="bg-yellow-500 text-white px-3 py-1 rounded-full text-sm font-medium">Bolalar</span>
                            </div>
                            <div class="absolute top-4 right-4">
                                <span class="bg-orange-500 text-white px-3 py-1 rounded-full text-sm font-medium">Kutilmoqda</span>
                            </div>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Bolalar bog'chasi uchun o'yinchoqlar</h3>
                            <p class="text-gray-600 mb-4 line-clamp-3">Mahalla bolalar bog'chasida o'yinchoqlar yetishmaydi. 50 nafar bolaga yangi o'yinchoqlar kerak.</p>
                            
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Kerakli miqdor:</span>
                                    <span class="font-bold text-yellow-600">5,000,000 so'm</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Ariza beruvchi:</span>
                                    <span class="font-medium">Malika Karimova</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Sana:</span>
                                    <span class="text-sm">10-fevral, 2024</span>
                                </div>
                            </div>
                            
                            <button class="w-full btn-primary text-white py-2 px-4 rounded-lg font-medium view-application-btn" data-application-id="2">
                                <i class="fas fa-eye mr-2"></i>Batafsil ko'rish
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="text-center mt-12">
                    <button id="loadMoreApplications" class="bg-gray-200 text-gray-700 px-8 py-3 rounded-lg font-medium hover:bg-gray-300 transition-all">
                        Ko'proq yuklash
                    </button>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="py-16 bg-white">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold text-gray-800 mb-4">Biz Haqimizda</h2>
                    <p class="text-xl text-gray-600">E-Ehson - O'zbekistondagi eng ishonchli xayriya platformasi</p>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div>
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">Bizning Missiyamiz</h3>
                        <p class="text-gray-600 mb-6">
                            E-Ehson platformasi orqali biz O'zbekiston xalqining xayriya qilish madaniyatini rivojlantirish va 
                            muhtoj odamlarga yordam berishni osonlashtirishni maqsad qilganmiz. Har bir xayriya, qanchalik kichik 
                            bo'lmasin, birovning hayotini yaxshilaydi.
                        </p>
                        <div class="space-y-4">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-check text-green-600"></i>
                                </div>
                                <span class="text-gray-700">100% shaffoflik va hisobotlar</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-check text-green-600"></i>
                                </div>
                                <span class="text-gray-700">Xavfsiz to'lov tizimlari</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-check text-green-600"></i>
                                </div>
                                <span class="text-gray-700">24/7 qo'llab-quvvatlash</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl p-8 text-white">
                        <div class="text-center">
                            <i class="fas fa-heart text-6xl mb-6 opacity-80"></i>
                            <h4 class="text-2xl font-bold mb-4">Bizning Qadriyatlarimiz</h4>
                            <ul class="space-y-3 text-left">
                                <li class="flex items-center space-x-3">
                                    <i class="fas fa-star text-yellow-300"></i>
                                    <span>Halollik va ishonch</span>
                                </li>
                                <li class="flex items-center space-x-3">
                                    <i class="fas fa-star text-yellow-300"></i>
                                    <span>Shaffoflik va ochiqlik</span>
                                </li>
                                <li class="flex items-center space-x-3">
                                    <i class="fas fa-star text-yellow-300"></i>
                                    <span>Ijtimoiy mas'uliyat</span>
                                </li>
                                <li class="flex items-center space-x-3">
                                    <i class="fas fa-star text-yellow-300"></i>
                                    <span>Innovatsiya va rivojlanish</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-16 bg-gray-50">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold text-gray-800 mb-4">Biz Bilan Bog'laning</h2>
                    <p class="text-xl text-gray-600">Savollaringiz bormi? Biz sizga yordam berishga tayyormiz</p>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                    <div>
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">Aloqa Ma'lumotlari</h3>
                        <div class="space-y-6">
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-phone text-blue-600"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-800">Telefon</p>
                                    <p class="text-gray-600">+998 95 888 38 51</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-envelope text-green-600"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-800">Email</p>
                                    <p class="text-gray-600">ehsonapp@gmail.com</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-map-marker-alt text-red-600"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-800">Manzil</p>
                                    <p class="text-gray-600">Toshkent, O'zbekiston</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-clock text-purple-600"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-800">Ish vaqti</p>
                                    <p class="text-gray-600">Dushanba - Juma: 9:00 - 18:00</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">Xabar Yuborish</h3>
                        <form id="contactForm" class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Ism</label>
                                    <input type="text" id="contactName" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Ismingiz" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Telefon</label>
                                    <input type="tel" id="contactPhone" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="+998 90 123 45 67" required>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                <input type="email" id="contactEmail" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="email@example.com" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Mavzu</label>
                                <input type="text" id="contactSubject" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Xabar mavzusi" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Xabar</label>
                                <textarea id="contactMessage" rows="5" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none" placeholder="Xabaringizni yozing..." required></textarea>
                            </div>
                            <button type="submit" class="w-full btn-primary text-white py-3 rounded-xl font-medium">
                                <i class="fas fa-paper-plane mr-2"></i>Xabar Yuborish
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- Help Section -->
        <section id="help" class="py-16 bg-white">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold text-gray-800 mb-4">Yordam</h2>
                    <p class="text-xl text-gray-600">Tez-tez so'raladigan savollar va javoblar</p>
                </div>
                
                <div class="max-w-4xl mx-auto">
                    <div class="space-y-6">
                        <div class="bg-gray-50 rounded-2xl p-6">
                            <button class="faq-question w-full text-left flex justify-between items-center" data-target="faq1">
                                <h3 class="text-lg font-bold text-gray-800">Qanday qilib xayriya qilishim mumkin?</h3>
                                <i class="fas fa-chevron-down text-gray-500"></i>
                            </button>
                            <div id="faq1" class="faq-answer hidden mt-4 text-gray-600">
                                <p>Xayriya qilish juda oson! Kampaniyalar bo'limidan kerakli kampaniyani tanlang, "Xayriya qilish" tugmasini bosing va miqdorni kiriting. To'lovni bank kartasi, Payme yoki Click orqali amalga oshirishingiz mumkin.</p>
                            </div>
                        </div>
                        
                        <div class="bg-gray-50 rounded-2xl p-6">
                            <button class="faq-question w-full text-left flex justify-between items-center" data-target="faq2">
                                <h3 class="text-lg font-bold text-gray-800">Mening pulim xavfsizmi?</h3>
                                <i class="fas fa-chevron-down text-gray-500"></i>
                            </button>
                            <div id="faq2" class="faq-answer hidden mt-4 text-gray-600">
                                <p>Ha, mutlaqo xavfsiz! Biz eng zamonaviy shifrlash texnologiyalaridan foydalanamiz va barcha to'lovlar xalqaro standartlar bo'yicha himoyalangan. Sizning moliyaviy ma'lumotlaringiz hech qachon uchinchi shaxslarga berilmaydi.</p>
                            </div>
                        </div>
                        
                        <div class="bg-gray-50 rounded-2xl p-6">
                            <button class="faq-question w-full text-left flex justify-between items-center" data-target="faq3">
                                <h3 class="text-lg font-bold text-gray-800">Yordam uchun qanday ariza berishim mumkin?</h3>
                                <i class="fas fa-chevron-down text-gray-500"></i>
                            </button>
                            <div id="faq3" class="faq-answer hidden mt-4 text-gray-600">
                                <p>Agar sizga yordam kerak bo'lsa, "Xayriya uchun ariza" tugmasini bosing va barcha kerakli ma'lumotlarni to'ldiring. Bizning moderatorlar 3-7 ish kuni ichida arizangizni ko'rib chiqadi va javob beradi.</p>
                            </div>
                        </div>
                        
                        <div class="bg-gray-50 rounded-2xl p-6">
                            <button class="faq-question w-full text-left flex justify-between items-center" data-target="faq4">
                                <h3 class="text-lg font-bold text-gray-800">Kampaniya yaratishim mumkinmi?</h3>
                                <i class="fas fa-chevron-down text-gray-500"></i>
                            </button>
                            <div id="faq4" class="faq-answer hidden mt-4 text-gray-600">
                                <p>Hozircha kampaniya yaratish faqat moderatorlar tomonidan amalga oshiriladi. Agar sizda kampaniya g'oyasi bo'lsa, "Xayriya uchun ariza" orqali murojaat qiling va biz sizga yordam beramiz.</p>
                            </div>
                        </div>
                        
                        <div class="bg-gray-50 rounded-2xl p-6">
                            <button class="faq-question w-full text-left flex justify-between items-center" data-target="faq5">
                                <h3 class="text-lg font-bold text-gray-800">Hisobotlarni qayerdan ko'rishim mumkin?</h3>
                                <i class="fas fa-chevron-down text-gray-500"></i>
                            </button>
                            <div id="faq5" class="faq-answer hidden mt-4 text-gray-600">
                                <p>Har bir kampaniya sahifasida real vaqtda yangilanuvchi hisobotlar mavjud. Shuningdek, oylik va yillik umumiy hisobotlarni bizning rasmiy kanallarimizda e'lon qilamiz.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Terms Section -->
        <section id="terms" class="py-16 bg-gray-50">
            <div class="container mx-auto px-4">
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-4xl font-bold text-gray-800 mb-8 text-center">Foydalanish Shartlari</h2>
                    
                    <div class="bg-white rounded-2xl shadow-lg p-8 space-y-6">
                        <div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">1. Umumiy qoidalar</h3>
                            <p class="text-gray-600">E-Ehson platformasidan foydalanish orqali siz ushbu shartlarga rozilik bildirasiz. Agar shartlar sizga mos kelmasa, platformadan foydalanmang.</p>
                        </div>
                        
                        <div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">2. Xayriya qoidalari</h3>
                            <p class="text-gray-600">Barcha xayriya mablag'lari to'g'ridan-to'g'ri kampaniya maqsadlariga sarflanadi. Biz har bir to'lovning shaffofligini ta'minlaymiz.</p>
                        </div>
                        
                        <div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">3. Foydalanuvchi mas'uliyati</h3>
                            <p class="text-gray-600">Foydalanuvchilar to'g'ri va aniq ma'lumot berishga majbur. Yolg'on ma'lumot berish hisobni bloklashga olib kelishi mumkin.</p>
                        </div>
                        
                        <div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">4. Maxfiylik</h3>
                            <p class="text-gray-600">Sizning shaxsiy ma'lumotlaringiz himoyalangan va uchinchi shaxslarga berilmaydi. Batafsil ma'lumot uchun maxfiylik siyosatini o'qing.</p>
                        </div>
                        
                        <div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">5. O'zgarishlar</h3>
                            <p class="text-gray-600">Biz ushbu shartlarni istalgan vaqtda o'zgartirish huquqini saqlab qolamiz. O'zgarishlar saytda e'lon qilinadi.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Privacy Section -->
        <section id="privacy" class="py-16 bg-white">
            <div class="container mx-auto px-4">
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-4xl font-bold text-gray-800 mb-8 text-center">Maxfiylik Siyosati</h2>
                    
                    <div class="bg-gray-50 rounded-2xl shadow-lg p-8 space-y-6">
                        <div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">Ma'lumotlar yig'ish</h3>
                            <p class="text-gray-600">Biz faqat xizmat ko'rsatish uchun zarur bo'lgan ma'lumotlarni yig'amiz: ism, telefon raqam, email manzil va to'lov ma'lumotlari.</p>
                        </div>
                        
                        <div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">Ma'lumotlardan foydalanish</h3>
                            <p class="text-gray-600">Sizning ma'lumotlaringiz faqat xayriya jarayonlarini ta'minlash, hisobotlar tayyorlash va sizga xizmat ko'rsatish uchun ishlatiladi.</p>
                        </div>
                        
                        <div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">Ma'lumotlar himoyasi</h3>
                            <p class="text-gray-600">Barcha ma'lumotlar shifrlangan holda saqlanadi va xavfsizlik bo'yicha eng yuqori standartlarga javob beradi.</p>
                        </div>
                        
                        <div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">Uchinchi shaxslar</h3>
                            <p class="text-gray-600">Sizning roziligingiz bo'lmasa, ma'lumotlaringiz hech qachon uchinchi shaxslarga berilmaydi yoki sotilmaydi.</p>
                        </div>
                        
                        <div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">Huquqlaringiz</h3>
                            <p class="text-gray-600">Siz o'z ma'lumotlaringizni ko'rish, o'zgartirish yoki o'chirish huquqiga egasiz. Buning uchun biz bilan bog'laning.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="bg-gray-800 text-white py-12">
            <div class="container mx-auto px-4">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                    <div>
                        <div class="flex items-center space-x-3 mb-6">
                            <div class="bg-blue-600 p-2 rounded-lg">
                                <i class="fas fa-heart text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold">E-Ehson</h3>
                                <p class="text-sm opacity-75">Xayriya Platformasi</p>
                            </div>
                        </div>
                        <p class="text-gray-300 mb-4">Yaxshilik qiling, dunyoni o'zgartiring. Har bir xayriya birovning hayotini yaxshilaydi.</p>
                    </div>
                    
                    <div>
                        <h4 class="text-lg font-bold mb-4">Tezkor Havolalar</h4>
                        <ul class="space-y-2">
                            <li><a href="#campaigns" class="text-gray-300 hover:text-white transition-colors">Kampaniyalar</a></li>
                            <li><a href="#applications" class="text-gray-300 hover:text-white transition-colors">Arizalar</a></li>
                            <li><a href="#about" class="text-gray-300 hover:text-white transition-colors">Biz haqimizda</a></li>
                            <li><a href="#contact" class="text-gray-300 hover:text-white transition-colors">Aloqa</a></li>
                            <li><a href="#help" class="text-gray-300 hover:text-white transition-colors">Yordam</a></li>
                        </ul>
                    </div>
                    
                    <div>
                        <h4 class="text-lg font-bold mb-4">Xizmatlar</h4>
                        <ul class="space-y-2">
                            <li><a href="#donate" class="text-gray-300 hover:text-white transition-colors">Xayriya qilish</a></li>
                            <li><a href="#create-campaign" class="text-gray-300 hover:text-white transition-colors">Kampaniya yaratish</a></li>
                            <li><a href="#get-help" class="text-gray-300 hover:text-white transition-colors">Yordam olish</a></li>
                            <li><a href="#reports" class="text-gray-300 hover:text-white transition-colors">Hisobot</a></li>
                        </ul>
                    </div>
                    
                    <div>
                        <h4 class="text-lg font-bold mb-4">Bog'lanish</h4>
                        <ul class="space-y-2 mb-6">
                            <li class="flex items-center space-x-2">
                                <i class="fas fa-phone text-blue-400"></i>
                                <span class="text-gray-300">+998 95 888 38 51</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <i class="fas fa-envelope text-green-400"></i>
                                <span class="text-gray-300">ehsonapp@gmail.com</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <i class="fas fa-map-marker-alt text-red-400"></i>
                                <span class="text-gray-300">Toshkent, O'zbekiston</span>
                            </li>
                        </ul>
                        
                        <div>
                            <h5 class="font-medium mb-3">Ijtimoiy tarmoqlar</h5>
                            <div class="flex space-x-3">
                                <a href="https://t.me/ehsonapp" target="_blank" rel="noopener noreferrer" class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center hover:bg-blue-600 transition-colors">
                                    <i class="fab fa-telegram text-white"></i>
                                </a>
                                <a href="https://facebook.com/ehsonapp" target="_blank" rel="noopener noreferrer" class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center hover:bg-blue-700 transition-colors">
                                    <i class="fab fa-facebook text-white"></i>
                                </a>
                                <a href="https://instagram.com/ehsonapp" target="_blank" rel="noopener noreferrer" class="w-10 h-10 bg-pink-500 rounded-full flex items-center justify-center hover:bg-pink-600 transition-colors">
                                    <i class="fab fa-instagram text-white"></i>
                                </a>
                                <a href="https://youtube.com/@ehsonapp" target="_blank" rel="noopener noreferrer" class="w-10 h-10 bg-red-500 rounded-full flex items-center justify-center hover:bg-red-600 transition-colors">
                                    <i class="fab fa-youtube text-white"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="border-t border-gray-700 mt-8 pt-8 text-center">
                    <div class="flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0">
                        <p class="text-gray-400">&copy; 2024 E-Ehson. Barcha huquqlar himoyalangan.</p>
                        <div class="flex space-x-6">
                            <a href="#terms" class="text-gray-400 hover:text-white transition-colors">
                                Foydalanish shartlari
                            </a>
                            <a href="#privacy" class="text-gray-400 hover:text-white transition-colors">
                                Maxfiylik siyosati
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Global variables
        let currentUser = null;
        let selectedDonationAmount = 0;
        let selectedPaymentMethod = '';
        let currentDonationCampaign = null;
        let isAdmin = false;
        let isModerator = false;
        let adminUsers = [
            {
                phone: '+998958883851',
                name: 'Jasurbek Jo\'lanboyev',
                email: 'jasurbekjolanboyev970@gmail.com',
                role: 'admin'
            }
        ];
        let moderators = [];
        let applications = [];
        let campaigns = [];
        let donations = [];
        let platformSettings = {
            commission: 2,
            minDonation: 10000
        };
        let recipientPaymentInfo = {};

        // Utility functions
        function formatCurrency(amount) {
            return new Intl.NumberFormat('uz-UZ').format(amount) + ' so\'m';
        }

        function showNotification(title, message, type = 'success') {
            const notification = document.getElementById('notification');
            const icon = document.getElementById('notificationIcon');
            const titleEl = document.getElementById('notificationTitle');
            const messageEl = document.getElementById('notificationMessage');

            titleEl.textContent = title;
            messageEl.textContent = message;

            const styles = {
                success: {
                    bgColor: 'bg-green-500',
                    borderColor: 'border-green-500',
                    icon: 'fas fa-check'
                },
                error: {
                    bgColor: 'bg-red-500',
                    borderColor: 'border-red-500',
                    icon: 'fas fa-times'
                },
                warning: {
                    bgColor: 'bg-yellow-500',
                    borderColor: 'border-yellow-500',
                    icon: 'fas fa-exclamation-triangle'
                },
                info: {
                    bgColor: 'bg-blue-500',
                    borderColor: 'border-blue-500',
                    icon: 'fas fa-info'
                }
            };

            const style = styles[type] || styles.success;
            
            icon.className = `w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${style.bgColor}`;
            icon.innerHTML = `<i class="${style.icon} text-white"></i>`;
            notification.className = `notification bg-white rounded-xl shadow-2xl p-6 max-w-sm border-l-4 ${style.borderColor}`;

            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
        }

        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.add('show');
        }

        function hideModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.remove('show');
        }

        // Authentication functions
        function login(phone) {
            // Check if admin
            const adminUser = adminUsers.find(admin => admin.phone === phone);
            if (adminUser) {
                currentUser = {
                    id: 1,
                    firstName: adminUser.name.split(' ')[0],
                    lastName: adminUser.name.split(' ')[1] || '',
                    phone: phone,
                    email: adminUser.email,
                    role: 'admin'
                };
                isAdmin = true;
                isModerator = true;
            } else {
                // Check if moderator
                const moderatorUser = moderators.find(mod => mod.phone === phone || mod.email === phone);
                if (moderatorUser) {
                    currentUser = {
                        id: moderatorUser.id,
                        firstName: moderatorUser.name.split(' ')[0],
                        lastName: moderatorUser.name.split(' ')[1] || '',
                        phone: moderatorUser.phone,
                        email: moderatorUser.email,
                        role: 'moderator'
                    };
                    isModerator = true;
                    isAdmin = false;
                } else {
                    // Regular user
                    currentUser = {
                        id: Date.now(),
                        firstName: "Test",
                        lastName: "Foydalanuvchi",
                        phone: phone,
                        email: "test@example.com",
                        role: 'user'
                    };
                    isAdmin = false;
                    isModerator = false;
                }
            }
            
            updateUserInterface();
            showNotification('Muvaffaqiyat!', 'Tizimga muvaffaqiyatli kirdingiz', 'success');
        }

        function logout() {
            currentUser = null;
            isAdmin = false;
            isModerator = false;
            updateUserInterface();
            showNotification('Chiqish', 'Tizimdan muvaffaqiyatli chiqdingiz', 'info');
        }

        function updateUserInterface() {
            const guestMenu = document.getElementById('guestMenu');
            const userMenu = document.getElementById('userMenu');
            const userName = document.getElementById('userName');
            const userNameFull = document.getElementById('userNameFull');
            const userPhone = document.getElementById('userPhone');

            if (currentUser) {
                guestMenu.classList.add('hidden');
                userMenu.classList.remove('hidden');
                userName.textContent = currentUser.firstName;
                userNameFull.textContent = `${currentUser.firstName} ${currentUser.lastName}`;
                userPhone.textContent = currentUser.phone;
            } else {
                guestMenu.classList.remove('hidden');
                userMenu.classList.add('hidden');
            }
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            const menuBtn = document.getElementById('menuBtn');
            const mobileMenu = document.getElementById('mobileMenu');
            const closeMobileMenu = document.getElementById('closeMobileMenu');

            menuBtn.addEventListener('click', () => {
                mobileMenu.classList.add('show');
            });

            closeMobileMenu.addEventListener('click', () => {
                mobileMenu.classList.remove('show');
            });

            // Profile dropdown
            const profileDropdown = document.getElementById('profileDropdown');
            const dropdownMenu = document.getElementById('dropdownMenu');

            if (profileDropdown) {
                profileDropdown.addEventListener('click', () => {
                    dropdownMenu.classList.toggle('hidden');
                });
            }

            // Close dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (dropdownMenu && !profileDropdown.contains(e.target)) {
                    dropdownMenu.classList.add('hidden');
                }
            });

            // Login modal
            const loginBtn = document.getElementById('loginBtn');
            const loginModal = document.getElementById('loginModal');
            const closeLoginModal = document.getElementById('closeLoginModal');
            const sendOtpBtn = document.getElementById('sendOtpBtn');
            const verifyOtpBtn = document.getElementById('verifyOtpBtn');
            const loginStep1 = document.getElementById('loginStep1');
            const loginStep2 = document.getElementById('loginStep2');
            const loginPhone = document.getElementById('loginPhone');
            const sentPhoneNumber = document.getElementById('sentPhoneNumber');
            const otpCode = document.getElementById('otpCode');

            loginBtn.addEventListener('click', () => showModal('loginModal'));
            closeLoginModal.addEventListener('click', () => hideModal('loginModal'));

            sendOtpBtn.addEventListener('click', () => {
                const phone = loginPhone.value.trim();
                if (!phone) {
                    showNotification('Xato', 'Telefon raqamni kiriting', 'error');
                    return;
                }
                
                sentPhoneNumber.textContent = phone;
                loginStep1.classList.add('hidden');
                loginStep2.classList.remove('hidden');
                showNotification('SMS yuborildi', 'Tasdiqlash kodi yuborildi', 'info');
            });

            verifyOtpBtn.addEventListener('click', () => {
                const code = otpCode.value.trim();
                if (code === '1234' || code.length === 4) {
                    login(loginPhone.value);
                    hideModal('loginModal');
                    loginStep1.classList.remove('hidden');
                    loginStep2.classList.add('hidden');
                    loginPhone.value = '';
                    otpCode.value = '';
                } else {
                    showNotification('Xato', 'Noto\'g\'ri tasdiqlash kodi', 'error');
                }
            });

            // Signup modal
            const signupBtn = document.getElementById('signupBtn');
            const signupModal = document.getElementById('signupModal');
            const createAccountBtn = document.getElementById('createAccountBtn');
            const switchToLogin = document.getElementById('switchToLogin');

            signupBtn.addEventListener('click', () => showModal('signupModal'));
            
            switchToLogin.addEventListener('click', () => {
                hideModal('signupModal');
                showModal('loginModal');
            });

            createAccountBtn.addEventListener('click', () => {
                const firstName = document.getElementById('signupFirstName').value.trim();
                const lastName = document.getElementById('signupLastName').value.trim();
                const phone = document.getElementById('signupPhone').value.trim();
                const agreeTerms = document.getElementById('agreeTerms').checked;

                if (!firstName || !lastName || !phone) {
                    showNotification('Xato', 'Barcha majburiy maydonlarni to\'ldiring', 'error');
                    return;
                }

                if (!agreeTerms) {
                    showNotification('Xato', 'Foydalanish shartlariga rozilik bering', 'error');
                    return;
                }

                login(phone);
                hideModal('signupModal');
                showNotification('Muvaffaqiyat!', 'Hisob muvaffaqiyatli yaratildi', 'success');
            });

            // Logout
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', logout);
            }

            // Charity application modal
            const applyForCharityBtn = document.getElementById('applyForCharityBtn');
            const applyCharityLink = document.getElementById('applyCharityLink');
            const charityApplicationModal = document.getElementById('charityApplicationModal');
            const closeApplicationModal = document.getElementById('closeApplicationModal');
            const charityApplicationForm = document.getElementById('charityApplicationForm');

            applyForCharityBtn.addEventListener('click', () => {
                if (!currentUser) {
                    showModal('loginModal');
                    return;
                }
                showModal('charityApplicationModal');
            });

            if (applyCharityLink) {
                applyCharityLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    showModal('charityApplicationModal');
                    dropdownMenu.classList.add('hidden');
                });
            }

            closeApplicationModal.addEventListener('click', () => hideModal('charityApplicationModal'));

            // Recipient payment type change handler
            const recipientPaymentType = document.getElementById('recipientPaymentType');
            if (recipientPaymentType) {
                recipientPaymentType.addEventListener('change', () => {
                    const type = recipientPaymentType.value;
                    
                    // Hide all fields
                    document.getElementById('recipientCardFields').classList.add('hidden');
                    document.getElementById('recipientAccountFields').classList.add('hidden');
                    document.getElementById('recipientPaymeFields').classList.add('hidden');
                    document.getElementById('recipientClickFields').classList.add('hidden');
                    
                    // Show selected fields
                    if (type === 'card') {
                        document.getElementById('recipientCardFields').classList.remove('hidden');
                    } else if (type === 'account') {
                        document.getElementById('recipientAccountFields').classList.remove('hidden');
                    } else if (type === 'payme') {
                        document.getElementById('recipientPaymeFields').classList.remove('hidden');
                    } else if (type === 'click') {
                        document.getElementById('recipientClickFields').classList.remove('hidden');
                    }
                });
            }

            // Card number formatting
            const recipientCardNumber = document.getElementById('recipientCardNumber');
            if (recipientCardNumber) {
                recipientCardNumber.addEventListener('input', (e) => {
                    let value = e.target.value.replace(/\s/g, '').replace(/[^0-9]/gi, '');
                    let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
                    e.target.value = formattedValue;
                });
            }

            charityApplicationForm.addEventListener('submit', (e) => {
                e.preventDefault();
                
                const title = document.getElementById('applicationTitle').value.trim();
                const category = document.getElementById('applicationCategory').value;
                const amount = document.getElementById('applicationAmount').value;
                const description = document.getElementById('applicationDescription').value.trim();
                const phone = document.getElementById('applicationPhone').value.trim();
                const agreeTerms = document.getElementById('agreeApplicationTerms').checked;
                const paymentType = document.getElementById('recipientPaymentType').value;

                if (!title || !category || !amount || !description || !phone || !agreeTerms || !paymentType) {
                    showNotification('Xato', 'Barcha majburiy maydonlarni to\'ldiring', 'error');
                    return;
                }

                // Validate recipient payment info
                if (!validateRecipientPaymentInfo(paymentType)) {
                    return;
                }

                // Save recipient payment info
                const recipientInfo = getRecipientPaymentInfo(paymentType);
                
                const newApplication = {
                    id: Date.now().toString(),
                    title: title,
                    category: category,
                    amount: parseInt(amount),
                    description: description,
                    phone: phone,
                    email: document.getElementById('applicationEmail').value.trim(),
                    applicantName: currentUser ? `${currentUser.firstName} ${currentUser.lastName}` : 'Anonim',
                    status: 'pending',
                    date: new Date().toISOString(),
                    userId: currentUser ? currentUser.id : null,
                    recipientPayment: recipientInfo
                };
                
                applications.push(newApplication);

                hideModal('charityApplicationModal');
                showNotification('Ariza yuborildi!', 'Arizangiz moderatsiyaga yuborildi. 3-7 ish kuni ichida javob beramiz.', 'success');
                
                // Reset form
                charityApplicationForm.reset();
                document.getElementById('recipientCardFields').classList.add('hidden');
                document.getElementById('recipientAccountFields').classList.add('hidden');
                document.getElementById('recipientPaymeFields').classList.add('hidden');
                document.getElementById('recipientClickFields').classList.add('hidden');
            });

            // Donation modal
            const donationModal = document.getElementById('donationModal');
            const closeDonationModal = document.getElementById('closeDonationModal');
            const donationStep1 = document.getElementById('donationStep1');
            const donationStep2 = document.getElementById('donationStep2');
            const nextToDonationStep2 = document.getElementById('nextToDonationStep2');
            const backToDonationStep1 = document.getElementById('backToDonationStep1');
            const proceedDonationBtn = document.getElementById('proceedDonationBtn');
            const selectedAmountDisplay = document.getElementById('selectedAmountDisplay');
            const customDonationAmount = document.getElementById('customDonationAmount');

            closeDonationModal.addEventListener('click', () => hideModal('donationModal'));

            // Donation amount selection
            document.querySelectorAll('.donation-amount').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.donation-amount').forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                    
                    const amount = btn.dataset.amount;
                    if (amount === 'custom') {
                        customDonationAmount.style.display = 'block';
                        customDonationAmount.focus();
                        selectedDonationAmount = 0;
                    } else {
                        customDonationAmount.style.display = 'none';
                        selectedDonationAmount = parseInt(amount);
                    }
                });
            });

            customDonationAmount.addEventListener('input', () => {
                selectedDonationAmount = parseInt(customDonationAmount.value) || 0;
            });

            nextToDonationStep2.addEventListener('click', () => {
                if (selectedDonationAmount < 10000) {
                    showNotification('Xato', 'Minimal xayriya miqdori 10,000 so\'m', 'error');
                    return;
                }
                
                selectedAmountDisplay.textContent = formatCurrency(selectedDonationAmount);
                donationStep1.classList.remove('active');
                donationStep2.classList.add('active');
            });

            backToDonationStep1.addEventListener('click', () => {
                donationStep2.classList.remove('active');
                donationStep1.classList.add('active');
            });

            // Payment method selection
            document.querySelectorAll('.payment-method-card').forEach(card => {
                card.addEventListener('click', () => {
                    document.querySelectorAll('.payment-method-card').forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');
                    selectedPaymentMethod = card.dataset.method;
                });
            });

            // Next to step 3
            const nextToDonationStep3 = document.getElementById('nextToDonationStep3');
            nextToDonationStep3.addEventListener('click', () => {
                if (!selectedPaymentMethod) {
                    showNotification('Xato', 'To\'lov usulini tanlang', 'error');
                    return;
                }

                if (!currentUser) {
                    hideModal('donationModal');
                    showModal('loginModal');
                    return;
                }

                // Load recipient payment info
                loadRecipientPaymentInfo();
                
                document.getElementById('finalAmountDisplay').textContent = formatCurrency(selectedDonationAmount);
                donationStep2.classList.remove('active');
                donationStep3.classList.add('active');
                
                // Show appropriate payment form
                showPaymentForm(selectedPaymentMethod);
            });

            // Back to step 2
            const backToDonationStep2 = document.getElementById('backToDonationStep2');
            backToDonationStep2.addEventListener('click', () => {
                donationStep3.classList.remove('active');
                donationStep2.classList.add('active');
            });

            // Proceed payment
            const proceedPaymentBtn = document.getElementById('proceedPaymentBtn');
            proceedPaymentBtn.addEventListener('click', () => {
                if (!validatePaymentForm()) {
                    return;
                }

                if (!document.getElementById('agreePayment').checked) {
                    showNotification('Xato', 'To\'lov shartlariga rozilik bering', 'error');
                    return;
                }

                // Show processing step
                donationStep3.classList.remove('active');
                donationStep4.classList.add('active');
                
                // Simulate payment processing
                setTimeout(() => {
                    processPayment();
                }, 3000);
            });

            // Close success
            const closeDonationSuccess = document.getElementById('closeDonationSuccess');
            closeDonationSuccess.addEventListener('click', () => {
                hideModal('donationModal');
                resetDonationModal();
            });

            // Donate buttons
            document.querySelectorAll('.donate-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const campaignId = btn.dataset.campaignId;
                    currentDonationCampaign = campaignId;
                    
                    const campaignTitle = btn.closest('.campaign-card').querySelector('h3').textContent;
                    document.getElementById('donationCampaignTitle').textContent = campaignTitle;
                    
                    showModal('donationModal');
                });
            });

            // Like buttons
            document.querySelectorAll('.like-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const icon = btn.querySelector('i');
                    if (icon.classList.contains('far')) {
                        icon.classList.remove('far');
                        icon.classList.add('fas');
                        icon.style.color = '#ef4444';
                        showNotification('Yoqtirildi!', 'Kampaniya yoqtirilganlar ro\'yxatiga qo\'shildi', 'success');
                    } else {
                        icon.classList.remove('fas');
                        icon.classList.add('far');
                        icon.style.color = '';
                        showNotification('Bekor qilindi', 'Kampaniya yoqtirilganlar ro\'yxatidan olib tashlandi', 'info');
                    }
                });
            });

            // Category filters
            document.querySelectorAll('.category-filter').forEach(filter => {
                filter.addEventListener('click', () => {
                    document.querySelectorAll('.category-filter').forEach(f => f.classList.remove('active'));
                    filter.classList.add('active');
                    
                    const category = filter.dataset.category;
                    filterCampaignsByCategory(category);
                    showNotification('Filtr qo\'llandi', `${filter.textContent} kategoriyasi tanlandi`, 'info');
                });
            });

            // Start donating button
            const startDonatingBtn = document.getElementById('startDonatingBtn');
            startDonatingBtn.addEventListener('click', () => {
                document.getElementById('campaigns').scrollIntoView({ behavior: 'smooth' });
            });

            // View application detail
            document.querySelectorAll('.view-application-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const applicationId = btn.dataset.applicationId;
                    showApplicationDetail(applicationId);
                });
            });

            // Close application detail modal
            const closeApplicationDetail = document.getElementById('closeApplicationDetail');
            if (closeApplicationDetail) {
                closeApplicationDetail.addEventListener('click', () => hideModal('applicationDetailModal'));
            }

            // Close notification
            const closeNotification = document.getElementById('closeNotification');
            closeNotification.addEventListener('click', () => {
                document.getElementById('notification').classList.remove('show');
            });

            // Close modals when clicking outside
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.classList.remove('show');
                    }
                });
            });

            // Smooth scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });

            // Contact form
            const contactForm = document.getElementById('contactForm');
            if (contactForm) {
                contactForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const name = document.getElementById('contactName').value.trim();
                    const phone = document.getElementById('contactPhone').value.trim();
                    const email = document.getElementById('contactEmail').value.trim();
                    const subject = document.getElementById('contactSubject').value.trim();
                    const message = document.getElementById('contactMessage').value.trim();
                    
                    if (!name || !phone || !email || !subject || !message) {
                        showNotification('Xato', 'Barcha maydonlarni to\'ldiring', 'error');
                        return;
                    }
                    
                    showNotification('Xabar yuborildi!', 'Tez orada siz bilan bog\'lanamiz', 'success');
                    contactForm.reset();
                });
            }

            // FAQ functionality
            document.querySelectorAll('.faq-question').forEach(question => {
                question.addEventListener('click', () => {
                    const targetId = question.dataset.target;
                    const answer = document.getElementById(targetId);
                    const icon = question.querySelector('i');
                    
                    if (answer.classList.contains('hidden')) {
                        answer.classList.remove('hidden');
                        icon.classList.remove('fa-chevron-down');
                        icon.classList.add('fa-chevron-up');
                    } else {
                        answer.classList.add('hidden');
                        icon.classList.remove('fa-chevron-up');
                        icon.classList.add('fa-chevron-down');
                    }
                });
            });

            // Profile link functionality
            const myProfileLink = document.getElementById('myProfileLink');
            if (myProfileLink) {
                myProfileLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (currentUser) {
                        loadProfileData();
                        showModal('profileModal');
                    }
                    dropdownMenu.classList.add('hidden');
                });
            }

            // Admin panel link functionality
            const adminPanelLink = document.getElementById('adminPanelLink');
            if (adminPanelLink) {
                adminPanelLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (isAdmin || isModerator) {
                        loadAdminPanel();
                        showModal('adminPanelModal');
                    } else {
                        showNotification('Ruxsat yo\'q', 'Admin paneliga kirish uchun admin huquqlari kerak', 'error');
                    }
                    dropdownMenu.classList.add('hidden');
                });
            }

            // Profile modal functionality
            const closeProfileModal = document.getElementById('closeProfileModal');
            if (closeProfileModal) {
                closeProfileModal.addEventListener('click', () => hideModal('profileModal'));
            }

            // Profile tabs
            document.querySelectorAll('.profile-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const targetTab = tab.dataset.tab;
                    
                    // Update tab styles
                    document.querySelectorAll('.profile-tab').forEach(t => {
                        t.classList.remove('active', 'text-blue-600', 'border-blue-600');
                        t.classList.add('text-gray-600');
                    });
                    tab.classList.add('active', 'text-blue-600', 'border-blue-600');
                    tab.classList.remove('text-gray-600');
                    
                    // Show/hide content
                    document.querySelectorAll('.profile-tab-content').forEach(content => {
                        content.classList.add('hidden');
                    });
                    document.getElementById(`profile${targetTab.charAt(0).toUpperCase() + targetTab.slice(1)}`).classList.remove('hidden');
                    
                    // Load specific data
                    if (targetTab === 'donations') {
                        loadUserDonations();
                    } else if (targetTab === 'applications') {
                        loadUserApplications();
                    }
                });
            });

            // Profile form
            const profileForm = document.getElementById('profileForm');
            if (profileForm) {
                profileForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const firstName = document.getElementById('profileFirstName').value.trim();
                    const lastName = document.getElementById('profileLastName').value.trim();
                    const email = document.getElementById('profileEmail').value.trim();
                    
                    if (currentUser) {
                        currentUser.firstName = firstName;
                        currentUser.lastName = lastName;
                        currentUser.email = email;
                        
                        updateUserInterface();
                        showNotification('Saqlandi!', 'Profil ma\'lumotlari yangilandi', 'success');
                    }
                });
            }

            // Admin panel functionality
            const closeAdminPanel = document.getElementById('closeAdminPanel');
            if (closeAdminPanel) {
                closeAdminPanel.addEventListener('click', () => hideModal('adminPanelModal'));
            }

            // Admin tabs
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const targetTab = tab.dataset.tab;
                    
                    // Update tab styles
                    document.querySelectorAll('.admin-tab').forEach(t => {
                        t.classList.remove('active', 'text-purple-600', 'border-purple-600');
                        t.classList.add('text-gray-600');
                    });
                    tab.classList.add('active', 'text-purple-600', 'border-purple-600');
                    tab.classList.remove('text-gray-600');
                    
                    // Show/hide content
                    document.querySelectorAll('.admin-tab-content').forEach(content => {
                        content.classList.add('hidden');
                    });
                    document.getElementById(`admin${targetTab.charAt(0).toUpperCase() + targetTab.slice(1)}`).classList.remove('hidden');
                    
                    // Load specific data
                    loadAdminTabData(targetTab);
                });
            });

            // Add admin functionality
            const addAdminBtn = document.getElementById('addAdminBtn');
            const addAdminModal = document.getElementById('addAdminModal');
            const closeAddAdminModal = document.getElementById('closeAddAdminModal');
            const addAdminForm = document.getElementById('addAdminForm');

            if (addAdminBtn) {
                addAdminBtn.addEventListener('click', () => showModal('addAdminModal'));
            }

            if (closeAddAdminModal) {
                closeAddAdminModal.addEventListener('click', () => hideModal('addAdminModal'));
            }

            if (addAdminForm) {
                addAdminForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const name = document.getElementById('newAdminName').value.trim();
                    const phone = document.getElementById('newAdminPhone').value.trim();
                    const email = document.getElementById('newAdminEmail').value.trim();
                    const role = document.getElementById('newAdminRole').value;
                    
                    if (!name || !phone || !email || !role) {
                        showNotification('Xato', 'Barcha maydonlarni to\'ldiring', 'error');
                        return;
                    }
                    
                    const newAdmin = {
                        id: Date.now(),
                        name: name,
                        phone: phone,
                        email: email,
                        role: role,
                        createdAt: new Date().toISOString()
                    };
                    
                    if (role === 'admin') {
                        adminUsers.push(newAdmin);
                    } else {
                        moderators.push(newAdmin);
                    }
                    
                    hideModal('addAdminModal');
                    showNotification('Qo\'shildi!', `${role === 'admin' ? 'Admin' : 'Moderator'} muvaffaqiyatli qo\'shildi`, 'success');
                    
                    // Reset form
                    addAdminForm.reset();
                    
                    // Reload admin list
                    loadAdminsList();
                });
            }

            // Settings save
            const saveSettingsBtn = document.getElementById('saveSettingsBtn');
            if (saveSettingsBtn) {
                saveSettingsBtn.addEventListener('click', () => {
                    const commission = document.getElementById('platformCommission').value;
                    const minDonation = document.getElementById('minDonationAmount').value;
                    
                    platformSettings.commission = parseInt(commission);
                    platformSettings.minDonation = parseInt(minDonation);
                    
                    showNotification('Saqlandi!', 'Platform sozlamalari yangilandi', 'success');
                });
            }

            // Service links functionality
            const serviceLinks = {
                'donate': () => {
                    document.getElementById('campaigns').scrollIntoView({ behavior: 'smooth' });
                },
                'create-campaign': () => {
                    if (!currentUser) {
                        showModal('loginModal');
                        return;
                    }
                    showNotification('Kampaniya yaratish', 'Ushbu funksiya tez orada qo\'shiladi', 'info');
                },
                'get-help': () => {
                    if (!currentUser) {
                        showModal('loginModal');
                        return;
                    }
                    showModal('charityApplicationModal');
                },
                'reports': () => {
                    showNotification('Hisobotlar', 'Hisobotlar sahifasi ishlab chiqilmoqda', 'info');
                }
            };

            // Add event listeners for service links
            Object.keys(serviceLinks).forEach(service => {
                const link = document.querySelector(`a[href="#${service}"]`);
                if (link) {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        serviceLinks[service]();
                    });
                }
            });

            // Card number formatting for payment form
            const cardNumber = document.getElementById('cardNumber');
            if (cardNumber) {
                cardNumber.addEventListener('input', (e) => {
                    let value = e.target.value.replace(/\s/g, '').replace(/[^0-9]/gi, '');
                    let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
                    e.target.value = formattedValue;
                });
            }

            // Card expiry formatting
            const cardExpiry = document.getElementById('cardExpiry');
            if (cardExpiry) {
                cardExpiry.addEventListener('input', (e) => {
                    let value = e.target.value.replace(/\D/g, '');
                    if (value.length >= 2) {
                        value = value.substring(0, 2) + '/' + value.substring(2, 4);
                    }
                    e.target.value = value;
                });
            }

            // CVV formatting
            const cardCvv = document.getElementById('cardCvv');
            if (cardCvv) {
                cardCvv.addEventListener('input', (e) => {
                    e.target.value = e.target.value.replace(/\D/g, '').substring(0, 3);
                });
            }

            // Load more campaigns
            const loadMoreCampaigns = document.getElementById('loadMoreCampaigns');
            if (loadMoreCampaigns) {
                loadMoreCampaigns.addEventListener('click', () => {
                    showNotification('Yuklash', 'Yangi kampaniyalar yuklanmoqda...', 'info');
                    // Simulate loading more campaigns
                    setTimeout(() => {
                        showNotification('Yuklandi!', 'Yangi kampaniyalar qo\'shildi', 'success');
                    }, 1500);
                });
            }

            // Load more applications
            const loadMoreApplications = document.getElementById('loadMoreApplications');
            if (loadMoreApplications) {
                loadMoreApplications.addEventListener('click', () => {
                    showNotification('Yuklash', 'Yangi arizalar yuklanmoqda...', 'info');
                    // Simulate loading more applications
                    setTimeout(() => {
                        showNotification('Yuklandi!', 'Yangi arizalar qo\'shildi', 'success');
                    }, 1500);
                });
            }

            // Initialize interface
            updateUserInterface();
        });

        // Admin panel functions
        function loadProfileData() {
            if (currentUser) {
                document.getElementById('profileFirstName').value = currentUser.firstName || '';
                document.getElementById('profileLastName').value = currentUser.lastName || '';
                document.getElementById('profilePhone').value = currentUser.phone || '';
                document.getElementById('profileEmail').value = currentUser.email || '';
                
                // Load user statistics
                const userDonations = donations.filter(d => d.userId === currentUser.id);
                const totalAmount = userDonations.reduce((sum, d) => sum + d.amount, 0);
                
                document.getElementById('userTotalDonations').textContent = userDonations.length;
                document.getElementById('userTotalAmount').textContent = formatCurrency(totalAmount);
            }
        }

        function loadUserDonations() {
            const container = document.getElementById('userDonationsList');
            const userDonations = donations.filter(d => d.userId === currentUser.id);
            
            if (userDonations.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">Hali xayriya qilmagansiz</p>';
                return;
            }
            
            container.innerHTML = userDonations.map(donation => `
                <div class="bg-gray-50 p-4 rounded-xl">
                    <div class="flex justify-between items-start">
                        <div>
                            <h5 class="font-medium text-gray-800">${donation.campaignTitle}</h5>
                            <p class="text-sm text-gray-600">${new Date(donation.date).toLocaleDateString('uz-UZ')}</p>
                        </div>
                        <div class="text-right">
                            <p class="font-bold text-green-600">${formatCurrency(donation.amount)}</p>
                            <p class="text-sm text-gray-500">${donation.method}</p>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function loadUserApplications() {
            const container = document.getElementById('userApplicationsList');
            const userApplications = applications.filter(a => a.userId === currentUser.id);
            
            if (userApplications.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">Hali ariza bermagansiz</p>';
                return;
            }
            
            container.innerHTML = userApplications.map(app => `
                <div class="bg-gray-50 p-4 rounded-xl">
                    <div class="flex justify-between items-start mb-2">
                        <h5 class="font-medium text-gray-800">${app.title}</h5>
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${
                            app.status === 'approved' ? 'bg-green-100 text-green-800' :
                            app.status === 'rejected' ? 'bg-red-100 text-red-800' :
                            'bg-yellow-100 text-yellow-800'
                        }">
                            ${app.status === 'approved' ? 'Tasdiqlangan' :
                              app.status === 'rejected' ? 'Rad etilgan' : 'Kutilmoqda'}
                        </span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">${app.description.substring(0, 100)}...</p>
                    <div class="flex justify-between text-sm text-gray-500">
                        <span>${formatCurrency(app.amount)}</span>
                        <span>${new Date(app.date).toLocaleDateString('uz-UZ')}</span>
                    </div>
                </div>
            `).join('');
        }

        function loadAdminPanel() {
            if (!isAdmin && !isModerator) return;
            
            // Load initial tab data
            loadAdminTabData('campaigns');
        }

        function loadAdminTabData(tab) {
            switch(tab) {
                case 'campaigns':
                    loadCampaignsList();
                    break;
                case 'applications':
                    loadApplicationsList();
                    break;
                case 'users':
                    loadUsersList();
                    break;
                case 'payments':
                    loadPaymentsList();
                    break;
                case 'admins':
                    loadAdminsList();
                    break;
                case 'settings':
                    loadSettings();
                    break;
            }
        }

        function loadCampaignsList() {
            const container = document.getElementById('adminCampaignsList');
            
            if (campaigns.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">Hali kampaniyalar yo\'q</p>';
                return;
            }
            
            container.innerHTML = campaigns.map(campaign => `
                <div class="bg-gray-50 p-6 rounded-xl">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <h5 class="font-bold text-gray-800 mb-2">${campaign.title}</h5>
                            <p class="text-gray-600 mb-3">${campaign.description.substring(0, 150)}...</p>
                            <div class="grid grid-cols-3 gap-4 text-sm">
                                <div>
                                    <span class="text-gray-500">Maqsad:</span>
                                    <p class="font-medium">${formatCurrency(campaign.target)}</p>
                                </div>
                                <div>
                                    <span class="text-gray-500">Yig'ilgan:</span>
                                    <p class="font-medium text-green-600">${formatCurrency(campaign.raised)}</p>
                                </div>
                                <div>
                                    <span class="text-gray-500">Xayriyachilar:</span>
                                    <p class="font-medium">${campaign.donors}</p>
                                </div>
                            </div>
                        </div>
                        <div class="flex space-x-2 ml-4">
                            <button class="px-3 py-1 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600">
                                <i class="fas fa-edit mr-1"></i>Tahrirlash
                            </button>
                            <button class="px-3 py-1 bg-red-500 text-white rounded-lg text-sm hover:bg-red-600">
                                <i class="fas fa-trash mr-1"></i>O'chirish
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function loadApplicationsList() {
            const container = document.getElementById('adminApplicationsList');
            
            if (applications.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">Hali arizalar yo\'q</p>';
                return;
            }
            
            container.innerHTML = applications.map(app => `
                <div class="bg-white p-6 rounded-xl border">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex-1">
                            <h5 class="font-bold text-gray-800 mb-2">${app.title}</h5>
                            <p class="text-gray-600 mb-3">${app.description}</p>
                            <div class="grid grid-cols-2 gap-4 text-sm">
                                <div>
                                    <span class="text-gray-500">Miqdor:</span>
                                    <p class="font-medium text-red-600">${formatCurrency(app.amount)}</p>
                                </div>
                                <div>
                                    <span class="text-gray-500">Ariza beruvchi:</span>
                                    <p class="font-medium">${app.applicantName}</p>
                                </div>
                                <div>
                                    <span class="text-gray-500">Telefon:</span>
                                    <p class="font-medium">${app.phone}</p>
                                </div>
                                <div>
                                    <span class="text-gray-500">Sana:</span>
                                    <p class="font-medium">${new Date(app.date).toLocaleDateString('uz-UZ')}</p>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-col space-y-2 ml-4">
                            <span class="px-3 py-1 rounded-full text-xs font-medium ${
                                app.status === 'approved' ? 'bg-green-100 text-green-800' :
                                app.status === 'rejected' ? 'bg-red-100 text-red-800' :
                                'bg-yellow-100 text-yellow-800'
                            }">
                                ${app.status === 'approved' ? 'Tasdiqlangan' :
                                  app.status === 'rejected' ? 'Rad etilgan' : 'Kutilmoqda'}
                            </span>
                            ${app.status === 'pending' ? `
                                <div class="flex space-x-2">
                                    <button onclick="approveApplication('${app.id}')" class="px-3 py-1 bg-green-500 text-white rounded-lg text-sm hover:bg-green-600">
                                        <i class="fas fa-check mr-1"></i>Tasdiqlash
                                    </button>
                                    <button onclick="rejectApplication('${app.id}')" class="px-3 py-1 bg-red-500 text-white rounded-lg text-sm hover:bg-red-600">
                                        <i class="fas fa-times mr-1"></i>Rad etish
                                    </button>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function loadUsersList() {
            const container = document.getElementById('adminUsersList');
            // Sample users data
            const users = [
                { id: 1, name: 'Test Foydalanuvchi', phone: '+998901234567', email: 'test@example.com', donations: 5, totalAmount: 500000 },
                { id: 2, name: 'Jasurbek Jo\'lanboyev', phone: '+998958883851', email: 'jasurbekjolanboyev970@gmail.com', donations: 0, totalAmount: 0 }
            ];
            
            container.innerHTML = users.map(user => `
                <div class="bg-white p-6 rounded-xl border">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                                <i class="fas fa-user text-blue-600"></i>
                            </div>
                            <div>
                                <h5 class="font-bold text-gray-800">${user.name}</h5>
                                <p class="text-gray-600">${user.phone}</p>
                                <p class="text-sm text-gray-500">${user.email}</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="font-medium text-green-600">${user.donations} xayriya</p>
                            <p class="text-sm text-gray-500">${formatCurrency(user.totalAmount)}</p>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function loadPaymentsList() {
            const container = document.getElementById('adminPaymentsList');
            
            // Update stats
            const totalAmount = donations.reduce((sum, d) => sum + d.amount, 0);
            const totalCommission = totalAmount * (platformSettings.commission / 100);
            const averageAmount = donations.length > 0 ? totalAmount / donations.length : 0;
            
            document.getElementById('totalPayments').textContent = formatCurrency(totalAmount);
            document.getElementById('paymentsCount').textContent = donations.length;
            document.getElementById('totalCommission').textContent = formatCurrency(totalCommission);
            document.getElementById('averagePayment').textContent = formatCurrency(averageAmount);
            
            if (donations.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">Hali to\'lovlar yo\'q</p>';
                return;
            }
            
            container.innerHTML = donations.map(payment => `
                <div class="bg-white p-4 rounded-xl border">
                    <div class="flex justify-between items-center">
                        <div>
                            <h5 class="font-medium text-gray-800">${payment.campaignTitle}</h5>
                            <p class="text-sm text-gray-600">${payment.userName}</p>
                            <p class="text-xs text-gray-500">${new Date(payment.date).toLocaleString('uz-UZ')}</p>
                        </div>
                        <div class="text-right">
                            <p class="font-bold text-green-600">${formatCurrency(payment.amount)}</p>
                            <p class="text-sm text-gray-500">${payment.method}</p>
                            <p class="text-xs text-purple-600">Komissiya: ${formatCurrency(payment.amount * (platformSettings.commission / 100))}</p>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function loadAdminsList() {
            const container = document.getElementById('adminAdminsList');
            const allAdmins = [...adminUsers, ...moderators];
            
            container.innerHTML = allAdmins.map(admin => `
                <div class="bg-white p-6 rounded-xl border">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 ${admin.role === 'admin' ? 'bg-purple-100' : 'bg-blue-100'} rounded-full flex items-center justify-center">
                                <i class="fas ${admin.role === 'admin' ? 'fa-user-shield text-purple-600' : 'fa-user-cog text-blue-600'}"></i>
                            </div>
                            <div>
                                <h5 class="font-bold text-gray-800">${admin.name}</h5>
                                <p class="text-gray-600">${admin.phone}</p>
                                <p class="text-sm text-gray-500">${admin.email}</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="px-3 py-1 rounded-full text-sm font-medium ${
                                admin.role === 'admin' ? 'bg-purple-100 text-purple-800' : 'bg-blue-100 text-blue-800'
                            }">
                                ${admin.role === 'admin' ? 'Admin' : 'Moderator'}
                            </span>
                            ${admin.phone !== '+998958883851' ? `
                                <button onclick="removeAdmin('${admin.id}', '${admin.role}')" class="ml-2 px-3 py-1 bg-red-500 text-white rounded-lg text-sm hover:bg-red-600">
                                    <i class="fas fa-trash"></i>
                                </button>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function loadSettings() {
            document.getElementById('platformCommission').value = platformSettings.commission;
            document.getElementById('minDonationAmount').value = platformSettings.minDonation;
        }

        // Admin actions
        function approveApplication(appId) {
            const app = applications.find(a => a.id === appId);
            if (app) {
                app.status = 'approved';
                showNotification('Tasdiqlandi!', 'Ariza tasdiqlandi va kampaniya yaratildi', 'success');
                
                // Create campaign from application
                const newCampaign = {
                    id: Date.now(),
                    title: app.title,
                    description: app.description,
                    target: app.amount,
                    raised: 0,
                    donors: 0,
                    category: app.category,
                    status: 'active',
                    createdAt: new Date().toISOString()
                };
                campaigns.push(newCampaign);
                
                loadApplicationsList();
            }
        }

        function rejectApplication(appId) {
            const app = applications.find(a => a.id === appId);
            if (app) {
                app.status = 'rejected';
                showNotification('Rad etildi', 'Ariza rad etildi', 'warning');
                loadApplicationsList();
            }
        }

        function removeAdmin(adminId, role) {
            if (confirm('Rostdan ham o\'chirmoqchimisiz?')) {
                if (role === 'admin') {
                    const index = adminUsers.findIndex(a => a.id == adminId);
                    if (index > -1) adminUsers.splice(index, 1);
                } else {
                    const index = moderators.findIndex(m => m.id == adminId);
                    if (index > -1) moderators.splice(index, 1);
                }
                
                showNotification('O\'chirildi!', `${role === 'admin' ? 'Admin' : 'Moderator'} o\'chirildi`, 'success');
                loadAdminsList();
            }
        }

        // Payment helper functions
        function loadRecipientPaymentInfo() {
            const campaign = campaigns.find(c => c.id == currentDonationCampaign);
            if (campaign && campaign.recipientPayment) {
                recipientPaymentInfo = campaign.recipientPayment;
                displayRecipientInfo(campaign.recipientPayment);
            } else {
                // Default recipient info for demo
                recipientPaymentInfo = {
                    type: 'card',
                    cardType: 'uzcard',
                    cardNumber: '8600 1234 5678 9012',
                    cardHolder: 'JOHN DOE'
                };
                displayRecipientInfo(recipientPaymentInfo);
            }
        }

        function displayRecipientInfo(paymentInfo) {
            const container = document.getElementById('recipientCardDetails');
            let html = '';
            
            if (paymentInfo.type === 'card') {
                html = `
                    <div class="flex justify-between">
                        <span class="text-gray-600">Karta turi:</span>
                        <span class="font-medium">${paymentInfo.cardType?.toUpperCase()}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">Karta raqami:</span>
                        <span class="font-mono">${paymentInfo.cardNumber}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">Karta egasi:</span>
                        <span class="font-medium">${paymentInfo.cardHolder}</span>
                    </div>
                `;
            } else if (paymentInfo.type === 'account') {
                html = `
                    <div class="flex justify-between">
                        <span class="text-gray-600">Bank:</span>
                        <span class="font-medium">${paymentInfo.bankName}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">Hisob raqami:</span>
                        <span class="font-mono">${paymentInfo.accountNumber}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">Hisob egasi:</span>
                        <span class="font-medium">${paymentInfo.accountHolder}</span>
                    </div>
                `;
            } else if (paymentInfo.type === 'payme') {
                html = `
                    <div class="flex justify-between">
                        <span class="text-gray-600">Payme raqami:</span>
                        <span class="font-mono">${paymentInfo.phone}</span>
                    </div>
                `;
            } else if (paymentInfo.type === 'click') {
                html = `
                    <div class="flex justify-between">
                        <span class="text-gray-600">Click raqami:</span>
                        <span class="font-mono">${paymentInfo.phone}</span>
                    </div>
                `;
            }
            
            container.innerHTML = html;
        }

        function showPaymentForm(method) {
            // Hide all forms
            document.getElementById('cardPaymentForm').classList.add('hidden');
            document.getElementById('paymePaymentForm').classList.add('hidden');
            document.getElementById('clickPaymentForm').classList.add('hidden');
            
            // Show selected form
            if (method === 'card') {
                document.getElementById('cardPaymentForm').classList.remove('hidden');
            } else if (method === 'payme') {
                document.getElementById('paymePaymentForm').classList.remove('hidden');
            } else if (method === 'click') {
                document.getElementById('clickPaymentForm').classList.remove('hidden');
            }
        }

        function validatePaymentForm() {
            if (selectedPaymentMethod === 'card') {
                const cardType = document.getElementById('cardType').value;
                const cardNumber = document.getElementById('cardNumber').value;
                const cardExpiry = document.getElementById('cardExpiry').value;
                const cardCvv = document.getElementById('cardCvv').value;
                const cardHolder = document.getElementById('cardHolder').value;
                
                if (!cardType || !cardNumber || !cardExpiry || !cardCvv || !cardHolder) {
                    showNotification('Xato', 'Barcha karta ma\'lumotlarini to\'ldiring', 'error');
                    return false;
                }
                
                if (cardNumber.replace(/\s/g, '').length < 16) {
                    showNotification('Xato', 'Karta raqami noto\'g\'ri', 'error');
                    return false;
                }
            } else if (selectedPaymentMethod === 'payme') {
                const phone = document.getElementById('paymePhone').value;
                if (!phone) {
                    showNotification('Xato', 'Telefon raqamni kiriting', 'error');
                    return false;
                }
            } else if (selectedPaymentMethod === 'click') {
                const phone = document.getElementById('clickPhone').value;
                if (!phone) {
                    showNotification('Xato', 'Telefon raqamni kiriting', 'error');
                    return false;
                }
            }
            
            return true;
        }

        function processPayment() {
            // Generate transaction ID
            const transactionId = 'TXN' + Date.now();
            
            // Create donation record
            const donation = {
                id: Date.now(),
                userId: currentUser.id,
                campaignId: currentDonationCampaign,
                campaignTitle: document.getElementById('donationCampaignTitle').textContent,
                userName: `${currentUser.firstName} ${currentUser.lastName}`,
                amount: selectedDonationAmount,
                method: getPaymentMethodName(selectedPaymentMethod),
                date: new Date().toISOString(),
                transactionId: transactionId,
                status: 'completed'
            };
            
            donations.push(donation);
            
            // Update campaign raised amount
            const campaign = campaigns.find(c => c.id == currentDonationCampaign);
            if (campaign) {
                campaign.raised += selectedDonationAmount;
                campaign.donors += 1;
            }
            
            // Show success step
            document.getElementById('successAmount').textContent = formatCurrency(selectedDonationAmount);
            document.getElementById('successMethod').textContent = getPaymentMethodName(selectedPaymentMethod);
            document.getElementById('transactionId').textContent = transactionId;
            document.getElementById('successDate').textContent = new Date().toLocaleString('uz-UZ');
            
            donationStep4.classList.remove('active');
            donationStep5.classList.add('active');
            
            showNotification('To\'lov muvaffaqiyatli!', 'Xayriyangiz uchun rahmat!', 'success');
        }

        function getPaymentMethodName(method) {
            const names = {
                'card': 'Bank kartasi',
                'payme': 'Payme',
                'click': 'Click'
            };
            return names[method] || method;
        }

        function resetDonationModal() {
            // Reset all steps
            document.querySelectorAll('.payment-step').forEach(step => step.classList.remove('active'));
            document.getElementById('donationStep1').classList.add('active');
            
            // Reset values
            selectedDonationAmount = 0;
            selectedPaymentMethod = '';
            currentDonationCampaign = null;
            
            // Reset forms
            document.querySelectorAll('.donation-amount').forEach(b => b.classList.remove('selected'));
            document.querySelectorAll('.payment-method-card').forEach(c => c.classList.remove('selected'));
            document.getElementById('customDonationAmount').value = '';
            document.getElementById('customDonationAmount').style.display = 'none';
            
            // Reset payment forms
            document.getElementById('cardType').value = '';
            document.getElementById('cardNumber').value = '';
            document.getElementById('cardExpiry').value = '';
            document.getElementById('cardCvv').value = '';
            document.getElementById('cardHolder').value = '';
            document.getElementById('paymePhone').value = '';
            document.getElementById('clickPhone').value = '';
            document.getElementById('agreePayment').checked = false;
        }

        function validateRecipientPaymentInfo(type) {
            if (type === 'card') {
                const cardType = document.getElementById('recipientCardType').value;
                const cardNumber = document.getElementById('recipientCardNumber').value;
                const cardHolder = document.getElementById('recipientCardHolder').value;
                
                if (!cardType || !cardNumber || !cardHolder) {
                    showNotification('Xato', 'Barcha karta ma\'lumotlarini to\'ldiring', 'error');
                    return false;
                }
            } else if (type === 'account') {
                const bankName = document.getElementById('recipientBankName').value;
                const accountNumber = document.getElementById('recipientAccountNumber').value;
                const accountHolder = document.getElementById('recipientAccountHolder').value;
                
                if (!bankName || !accountNumber || !accountHolder) {
                    showNotification('Xato', 'Barcha hisob ma\'lumotlarini to\'ldiring', 'error');
                    return false;
                }
            } else if (type === 'payme') {
                const phone = document.getElementById('recipientPaymePhone').value;
                if (!phone) {
                    showNotification('Xato', 'Payme telefon raqamini kiriting', 'error');
                    return false;
                }
            } else if (type === 'click') {
                const phone = document.getElementById('recipientClickPhone').value;
                if (!phone) {
                    showNotification('Xato', 'Click telefon raqamini kiriting', 'error');
                    return false;
                }
            }
            
            return true;
        }

        function getRecipientPaymentInfo(type) {
            if (type === 'card') {
                return {
                    type: 'card',
                    cardType: document.getElementById('recipientCardType').value,
                    cardNumber: document.getElementById('recipientCardNumber').value,
                    cardHolder: document.getElementById('recipientCardHolder').value
                };
            } else if (type === 'account') {
                return {
                    type: 'account',
                    bankName: document.getElementById('recipientBankName').value,
                    accountNumber: document.getElementById('recipientAccountNumber').value,
                    accountHolder: document.getElementById('recipientAccountHolder').value
                };
            } else if (type === 'payme') {
                return {
                    type: 'payme',
                    phone: document.getElementById('recipientPaymePhone').value
                };
            } else if (type === 'click') {
                return {
                    type: 'click',
                    phone: document.getElementById('recipientClickPhone').value
                };
            }
        }

        // Show application detail function
        function showApplicationDetail(applicationId) {
            const application = applications.find(app => app.id === applicationId);
            if (!application) return;
            
            const content = document.getElementById('applicationDetailContent');
            const title = document.getElementById('applicationDetailTitle');
            
            title.textContent = application.title;
            
            const statusColors = {
                'pending': 'bg-yellow-100 text-yellow-800',
                'approved': 'bg-green-100 text-green-800',
                'rejected': 'bg-red-100 text-red-800'
            };
            
            const statusTexts = {
                'pending': 'Kutilmoqda',
                'approved': 'Tasdiqlangan',
                'rejected': 'Rad etilgan'
            };
            
            const categoryNames = {
                'health': 'Sog\'liqni saqlash',
                'education': 'Ta\'lim',
                'children': 'Bolalar',
                'emergency': 'Favqulodda vaziyat',
                'family': 'Oilaviy muammolar',
                'disability': 'Nogironlik'
            };
            
            content.innerHTML = `
                <div class="bg-gray-50 p-6 rounded-xl">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <span class="px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800">
                                ${categoryNames[application.category] || application.category}
                            </span>
                        </div>
                        <span class="px-3 py-1 rounded-full text-sm font-medium ${statusColors[application.status]}">
                            ${statusTexts[application.status]}
                        </span>
                    </div>
                    
                    <h4 class="text-xl font-bold text-gray-800 mb-4">${application.title}</h4>
                    
                    <div class="space-y-4">
                        <div>
                            <h5 class="font-medium text-gray-700 mb-2">Tavsif:</h5>
                            <p class="text-gray-600 leading-relaxed">${application.description}</p>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white p-4 rounded-lg">
                                <h5 class="font-medium text-gray-700 mb-2">Kerakli miqdor:</h5>
                                <p class="text-2xl font-bold text-red-600">${formatCurrency(application.amount)}</p>
                            </div>
                            
                            <div class="bg-white p-4 rounded-lg">
                                <h5 class="font-medium text-gray-700 mb-2">Ariza beruvchi:</h5>
                                <p class="font-medium text-gray-800">${application.applicantName}</p>
                                <p class="text-sm text-gray-600">${application.phone}</p>
                                ${application.email ? `<p class="text-sm text-gray-600">${application.email}</p>` : ''}
                            </div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg">
                            <h5 class="font-medium text-gray-700 mb-2">Ariza sanasi:</h5>
                            <p class="text-gray-600">${new Date(application.date).toLocaleDateString('uz-UZ', {
                                year: 'numeric',
                                month: 'long',
                                day: 'numeric',
                                hour: '2-digit',
                                minute: '2-digit'
                            })}</p>
                        </div>
                        
                        ${application.recipientPayment ? `
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <h5 class="font-medium text-gray-700 mb-3">To'lov qabul qilish ma'lumotlari:</h5>
                                ${getRecipientPaymentDisplay(application.recipientPayment)}
                            </div>
                        ` : ''}
                    </div>
                </div>
                
                ${application.status === 'approved' ? `
                    <div class="text-center">
                        <button onclick="createCampaignFromApplication('${application.id}')" class="btn-primary text-white px-6 py-3 rounded-xl font-medium">
                            <i class="fas fa-bullhorn mr-2"></i>Kampaniya yaratish
                        </button>
                    </div>
                ` : ''}
            `;
            
            showModal('applicationDetailModal');
        }

        // Get recipient payment display
        function getRecipientPaymentDisplay(paymentInfo) {
            if (paymentInfo.type === 'card') {
                return `
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Karta turi:</span>
                            <span class="font-medium">${paymentInfo.cardType?.toUpperCase()}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Karta raqami:</span>
                            <span class="font-mono">${paymentInfo.cardNumber}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Karta egasi:</span>
                            <span class="font-medium">${paymentInfo.cardHolder}</span>
                        </div>
                    </div>
                `;
            } else if (paymentInfo.type === 'account') {
                return `
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Bank:</span>
                            <span class="font-medium">${paymentInfo.bankName}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Hisob raqami:</span>
                            <span class="font-mono">${paymentInfo.accountNumber}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Hisob egasi:</span>
                            <span class="font-medium">${paymentInfo.accountHolder}</span>
                        </div>
                    </div>
                `;
            } else if (paymentInfo.type === 'payme') {
                return `
                    <div class="flex justify-between">
                        <span class="text-gray-600">Payme raqami:</span>
                        <span class="font-mono">${paymentInfo.phone}</span>
                    </div>
                `;
            } else if (paymentInfo.type === 'click') {
                return `
                    <div class="flex justify-between">
                        <span class="text-gray-600">Click raqami:</span>
                        <span class="font-mono">${paymentInfo.phone}</span>
                    </div>
                `;
            }
            return '';
        }

        // Create campaign from application
        function createCampaignFromApplication(applicationId) {
            const application = applications.find(app => app.id === applicationId);
            if (!application) return;
            
            const newCampaign = {
                id: Date.now(),
                title: application.title,
                description: application.description,
                target: application.amount,
                raised: 0,
                donors: 0,
                category: application.category,
                status: 'active',
                createdAt: new Date().toISOString(),
                recipientPayment: application.recipientPayment
            };
            
            campaigns.push(newCampaign);
            
            // Add new campaign card to the page
            addCampaignToPage(newCampaign);
            
            hideModal('applicationDetailModal');
            showNotification('Kampaniya yaratildi!', 'Ariza asosida yangi kampaniya yaratildi', 'success');
        }

        // Add campaign to page
        function addCampaignToPage(campaign) {
            const campaignsGrid = document.getElementById('campaignsGrid');
            const categoryNames = {
                'health': 'Sog\'liqni saqlash',
                'education': 'Ta\'lim',
                'children': 'Bolalar',
                'emergency': 'Favqulodda vaziyat',
                'family': 'Oilaviy muammolar',
                'disability': 'Nogironlik'
            };
            
            const categoryColors = {
                'health': 'bg-red-500',
                'education': 'bg-green-500',
                'children': 'bg-yellow-500',
                'emergency': 'bg-orange-500',
                'family': 'bg-purple-500',
                'disability': 'bg-blue-500'
            };
            
            const categoryIcons = {
                'health': 'fas fa-heartbeat',
                'education': 'fas fa-school',
                'children': 'fas fa-child',
                'emergency': 'fas fa-exclamation-triangle',
                'family': 'fas fa-home',
                'disability': 'fas fa-wheelchair'
            };
            
            const progressPercentage = Math.round((campaign.raised / campaign.target) * 100);
            const daysLeft = Math.floor(Math.random() * 60) + 1; // Random days for demo
            
            const campaignCard = document.createElement('div');
            campaignCard.className = 'campaign-card bg-white rounded-2xl shadow-lg overflow-hidden';
            campaignCard.innerHTML = `
                <div class="relative">
                    <div class="w-full h-48 bg-gradient-to-r from-${campaign.category === 'health' ? 'red' : campaign.category === 'education' ? 'green' : campaign.category === 'children' ? 'yellow' : campaign.category === 'family' ? 'purple' : 'blue'}-400 to-${campaign.category === 'health' ? 'red' : campaign.category === 'education' ? 'green' : campaign.category === 'children' ? 'yellow' : campaign.category === 'family' ? 'purple' : 'blue'}-600 flex items-center justify-center">
                        <div class="text-center text-white">
                            <i class="${categoryIcons[campaign.category] || 'fas fa-heart'} text-4xl mb-2"></i>
                            <p class="text-lg font-semibold">${campaign.title.split(' ').slice(0, 2).join(' ')}</p>
                        </div>
                    </div>
                    <div class="absolute top-4 left-4">
                        <span class="${categoryColors[campaign.category] || 'bg-blue-500'} text-white px-3 py-1 rounded-full text-sm font-medium">${categoryNames[campaign.category] || campaign.category}</span>
                    </div>
                </div>
                <div class="p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-2 line-clamp-2">${campaign.title}</h3>
                    <p class="text-gray-600 mb-4 line-clamp-3">${campaign.description}</p>
                    
                    <div class="mb-4">
                        <div class="flex justify-between text-sm text-gray-600 mb-2">
                            <span>Yig'ilgan: ${formatCurrency(campaign.raised)}</span>
                            <span>Maqsad: ${formatCurrency(campaign.target)}</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="progress-bar h-2 rounded-full" style="width: ${progressPercentage}%"></div>
                        </div>
                        <div class="flex justify-between text-sm text-gray-500 mt-2">
                            <span>${campaign.donors} xayriyachi</span>
                            <span>${daysLeft} kun qoldi</span>
                        </div>
                    </div>
                    
                    <div class="flex space-x-3">
                        <button class="flex-1 btn-primary text-white py-2 px-4 rounded-lg font-medium donate-btn" data-campaign-id="${campaign.id}">
                            <i class="fas fa-heart mr-2"></i>Xayriya qilish
                        </button>
                        <button class="p-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-all like-btn" data-campaign-id="${campaign.id}">
                            <i class="far fa-heart text-gray-600"></i>
                        </button>
                    </div>
                </div>
            `;
            
            campaignsGrid.appendChild(campaignCard);
            
            // Add event listeners to new buttons
            const donateBtn = campaignCard.querySelector('.donate-btn');
            const likeBtn = campaignCard.querySelector('.like-btn');
            
            donateBtn.addEventListener('click', () => {
                currentDonationCampaign = campaign.id;
                document.getElementById('donationCampaignTitle').textContent = campaign.title;
                showModal('donationModal');
            });
            
            likeBtn.addEventListener('click', () => {
                const icon = likeBtn.querySelector('i');
                if (icon.classList.contains('far')) {
                    icon.classList.remove('far');
                    icon.classList.add('fas');
                    icon.style.color = '#ef4444';
                    showNotification('Yoqtirildi!', 'Kampaniya yoqtirilganlar ro\'yxatiga qo\'shildi', 'success');
                } else {
                    icon.classList.remove('fas');
                    icon.classList.add('far');
                    icon.style.color = '';
                    showNotification('Bekor qilindi', 'Kampaniya yoqtirilganlar ro\'yxatidan olib tashlandi', 'info');
                }
            });
        }

        // Campaign filtering function
        function filterCampaignsByCategory(category) {
            const campaignCards = document.querySelectorAll('.campaign-card');
            
            campaignCards.forEach(card => {
                const cardCategory = card.querySelector('.bg-blue-500, .bg-green-500, .bg-purple-500, .bg-red-500, .bg-yellow-500, .bg-orange-500').textContent.trim();
                
                if (category === 'all') {
                    card.style.display = 'block';
                } else {
                    const categoryMap = {
                        'health': 'Sog\'liqni saqlash',
                        'education': 'Ta\'lim',
                        'children': 'Bolalar',
                        'emergency': 'Favqulodda vaziyat',
                        'family': 'Oilaviy muammolar',
                        'disability': 'Nogironlik'
                    };
                    
                    if (cardCategory === categoryMap[category]) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                }
            });
        }

        // Application filtering function
        function filterApplicationsByCategory(category) {
            const applicationCards = document.querySelectorAll('#applicationsGrid > div');
            
            applicationCards.forEach(card => {
                const cardCategory = card.querySelector('.bg-red-500, .bg-yellow-500, .bg-green-500, .bg-blue-500, .bg-purple-500, .bg-orange-500').textContent.trim();
                
                if (category === 'all') {
                    card.style.display = 'block';
                } else {
                    const categoryMap = {
                        'health': 'Sog\'liqni saqlash',
                        'education': 'Ta\'lim',
                        'children': 'Bolalar',
                        'emergency': 'Favqulodda vaziyat',
                        'family': 'Oilaviy muammolar',
                        'disability': 'Nogironlik'
                    };
                    
                    if (cardCategory === categoryMap[category]) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                }
            });
        }

        // Sample data initialization
        applications = [
            {
                id: '1',
                title: 'Onaning operatsiyasi uchun yordam',
                description: 'Onamning jiddiy operatsiyasi kerak, moliyaviy imkoniyat yo\'q. Shifokorlar operatsiyani kechiktirish mumkin emasligini aytishdi.',
                amount: 25000000,
                category: 'health',
                applicantName: 'Dilshod Rahimov',
                phone: '+998901234567',
                email: 'dilshod@example.com',
                status: 'approved',
                date: '2024-02-05T10:00:00Z',
                userId: 1,
                recipientPayment: {
                    type: 'card',
                    cardType: 'uzcard',
                    cardNumber: '8600 1234 5678 9012',
                    cardHolder: 'DILSHOD RAHIMOV'
                }
            },
            {
                id: '2',
                title: 'Bolalar bog\'chasi uchun o\'yinchoqlar',
                description: 'Mahalla bolalar bog\'chasida o\'yinchoqlar yetishmaydi. 50 nafar bolaga yangi o\'yinchoqlar kerak.',
                amount: 5000000,
                category: 'children',
                applicantName: 'Malika Karimova',
                phone: '+998901234568',
                email: 'malika@example.com',
                status: 'pending',
                date: '2024-02-10T14:30:00Z',
                userId: 2,
                recipientPayment: {
                    type: 'payme',
                    phone: '+998901234568'
                }
            }
        ];

        campaigns = [
            {
                id: 1,
                title: '7 yoshli Anvar uchun yurak operatsiyasi',
                description: 'Anvar tug\'ma yurak kasalligi bilan og\'riydi va operatsiya qilish zarur. Oilasi moliyaviy qiyinchilikda.',
                target: 50000000,
                raised: 35000000,
                donors: 234,
                category: 'health',
                status: 'active',
                recipientPayment: {
                    type: 'card',
                    cardType: 'uzcard',
                    cardNumber: '8600 1234 5678 9012',
                    cardHolder: 'ANVAR KARIMOV'
                }
            },
            {
                id: 2,
                title: 'Qashqadaryo viloyatida maktab qurilishi',
                description: '200 nafar bolaga ta\'lim berish uchun yangi maktab qurilishi kerak. Hozirgi maktab juda eski.',
                target: 200000000,
                raised: 120000000,
                donors: 567,
                category: 'education',
                status: 'active',
                recipientPayment: {
                    type: 'account',
                    bankName: 'O\'zbekiston Milliy Banki',
                    accountNumber: '20208000000000000001',
                    accountHolder: 'Qashqadaryo Maktab Qurilishi Jamg\'armasi'
                }
            },
            {
                id: 3,
                title: '5 bolali oila uchun uy qurilishi',
                description: 'Katta oila ijaraga pul topa olmaydi va o\'z uyiga muhtoj. Bolalar sog\'lom muhitda o\'sishi kerak.',
                target: 80000000,
                raised: 45000000,
                donors: 189,
                category: 'family',
                status: 'active',
                recipientPayment: {
                    type: 'click',
                    phone: '+998901234569'
                }
            }
        ];

        donations = [
            {
                id: 1,
                userId: 1,
                campaignId: 1,
                campaignTitle: '7 yoshli Anvar uchun yurak operatsiyasi',
                userName: 'Test Foydalanuvchi',
                amount: 100000,
                method: 'Payme',
                date: '2024-02-15T09:30:00Z'
            },
            {
                id: 2,
                userId: 1,
                campaignId: 2,
                campaignTitle: 'Qashqadaryo viloyatida maktab qurilishi',
                userName: 'Test Foydalanuvchi',
                amount: 250000,
                method: 'Bank kartasi',
                date: '2024-02-14T16:45:00Z'
            }
        ];
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'982de07f16d70d92',t:'MTc1ODUwMjk0OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
